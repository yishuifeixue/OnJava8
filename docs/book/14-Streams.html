<!DOCTYPE html><html><head>
      <title>14-Streams</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\18215\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.5.12\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <ul>
<li><a href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-%E6%B5%81%E5%BC%8F%E7%BC%96%E7%A8%8B">&#x7B2C;&#x5341;&#x56DB;&#x7AE0; &#x6D41;&#x5F0F;&#x7F16;&#x7A0B;</a>
<ul>
<li><a href="#%E6%B5%81%E6%94%AF%E6%8C%81">&#x6D41;&#x652F;&#x6301;</a></li>
<li><a href="#%E6%B5%81%E5%88%9B%E5%BB%BA">&#x6D41;&#x521B;&#x5EFA;</a>
<ul>
<li><a href="#%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%B5%81">&#x968F;&#x673A;&#x6570;&#x6D41;</a></li>
<li><a href="#int-%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%8C%83%E5%9B%B4">int &#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;</a></li>
<li><a href="#generate">generate()</a></li>
<li><a href="#iterate">iterate()</a></li>
<li><a href="#%E6%B5%81%E7%9A%84%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</a></li>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</a></li>
</ul>
</li>
<li><a href="#%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C">&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;</a>
<ul>
<li><a href="#%E8%B7%9F%E8%B8%AA%E5%92%8C%E8%B0%83%E8%AF%95">&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;</a></li>
<li><a href="#%E6%B5%81%E5%85%83%E7%B4%A0%E6%8E%92%E5%BA%8F">&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;</a></li>
<li><a href="#%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0">&#x79FB;&#x9664;&#x5143;&#x7D20;</a></li>
<li><a href="#%E5%BA%94%E7%94%A8%E5%87%BD%E6%95%B0%E5%88%B0%E5%85%83%E7%B4%A0">&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;</a></li>
<li><a href="#%E5%9C%A8-map-%E4%B8%AD%E7%BB%84%E5%90%88%E6%B5%81">&#x5728; <code>map()</code> &#x4E2D;&#x7EC4;&#x5408;&#x6D41;</a></li>
</ul>
</li>
<li><a href="#optional%E7%B1%BB">Optional&#x7C7B;</a>
<ul>
<li><a href="#%E4%BE%BF%E5%88%A9%E5%87%BD%E6%95%B0">&#x4FBF;&#x5229;&#x51FD;&#x6570;</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-optional">&#x521B;&#x5EFA; Optional</a></li>
<li><a href="#optional-%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C">Optional &#x5BF9;&#x8C61;&#x64CD;&#x4F5C;</a></li>
<li><a href="#optional-%E6%B5%81">Optional &#x6D41;</a></li>
</ul>
</li>
<li><a href="#%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C">&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;</a>
<ul>
<li><a href="#%E6%95%B0%E7%BB%84">&#x6570;&#x7EC4;</a></li>
<li><a href="#%E5%BE%AA%E7%8E%AF">&#x5FAA;&#x73AF;</a></li>
<li><a href="#%E9%9B%86%E5%90%88">&#x96C6;&#x5408;</a></li>
<li><a href="#%E7%BB%84%E5%90%88">&#x7EC4;&#x5408;</a></li>
<li><a href="#%E5%8C%B9%E9%85%8D">&#x5339;&#x914D;</a></li>
<li><a href="#%E6%9F%A5%E6%89%BE">&#x67E5;&#x627E;</a></li>
<li><a href="#%E4%BF%A1%E6%81%AF">&#x4FE1;&#x606F;</a></li>
<li><a href="#%E6%95%B0%E5%AD%97%E6%B5%81%E4%BF%A1%E6%81%AF">&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;</a></li>
</ul>
</li>
<li><a href="#%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93">&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;</a></li>
</ul>
</li>
</ul>
<h1 class="mume-header" id="%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-%E6%B5%81%E5%BC%8F%E7%BC%96%E7%A8%8B">&#x7B2C;&#x5341;&#x56DB;&#x7AE0; &#x6D41;&#x5F0F;&#x7F16;&#x7A0B;</h1>

<blockquote>
<p>&#x96C6;&#x5408;&#x4F18;&#x5316;&#x4E86;&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x6D41;&#x548C;&#x5BF9;&#x8C61;&#x7684;&#x5904;&#x7406;&#x6709;&#x5173;&#x3002;</p>
</blockquote>
<p>&#x6D41;&#x662F;&#x4E00;&#x7CFB;&#x5217;&#x4E0E;&#x7279;&#x5B9A;&#x5B58;&#x50A8;&#x673A;&#x5236;&#x65E0;&#x5173;&#x7684;&#x5143;&#x7D20;&#x2014;&#x2014;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x6D41;&#x5E76;&#x6CA1;&#x6709;&#x201C;&#x5B58;&#x50A8;&#x201D;&#x4E4B;&#x8BF4;&#x3002;</p>
<p>&#x5229;&#x7528;&#x6D41;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x8FED;&#x4EE3;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x63D0;&#x53D6;&#x548C;&#x64CD;&#x4F5C;&#x5B83;&#x4EEC;&#x3002;&#x8FD9;&#x4E9B;&#x7BA1;&#x9053;&#x901A;&#x5E38;&#x88AB;&#x7EC4;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5728;&#x6D41;&#x4E0A;&#x5F62;&#x6210;&#x4E00;&#x6761;&#x64CD;&#x4F5C;&#x7BA1;&#x9053;&#x3002;</p>
<p>&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x5728;&#x96C6;&#x5408;&#x4E2D;&#x662F;&#x4E3A;&#x4E86;&#x5904;&#x7406;&#x4ED6;&#x4EEC;&#xFF0C;&#x56E0;&#x6B64;&#x4F60;&#x5C06;&#x4F1A;&#x53D1;&#x73B0;&#x4F60;&#x5C06;&#x628A;&#x7F16;&#x7A0B;&#x7684;&#x4E3B;&#x8981;&#x7126;&#x70B9;&#x4ECE;&#x96C6;&#x5408;&#x8F6C;&#x79FB;&#x5230;&#x4E86;&#x6D41;&#x4E0A;&#x3002;&#x6D41;&#x7684;&#x4E00;&#x4E2A;&#x6838;&#x5FC3;&#x597D;&#x5904;&#x662F;&#xFF0C;&#x5B83;&#x4F7F;&#x5F97;&#x7A0B;&#x5E8F;&#x66F4;&#x52A0;&#x77ED;&#x5C0F;&#x5E76;&#x4E14;&#x66F4;&#x6613;&#x7406;&#x89E3;&#x3002;&#x5F53; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x548C;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#xFF08;method references&#xFF09;&#x548C;&#x6D41;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x8BA9;&#x4EBA;&#x611F;&#x89C9;&#x81EA;&#x6210;&#x4E00;&#x4F53;&#x3002;&#x6D41;&#x4F7F;&#x5F97; Java 8 &#x66F4;&#x5177;&#x5438;&#x5F15;&#x529B;&#x3002;</p>
<p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x5047;&#x5982;&#x4F60;&#x8981;&#x968F;&#x673A;&#x5C55;&#x793A; 5 &#x81F3; 20 &#x4E4B;&#x95F4;&#x4E0D;&#x91CD;&#x590D;&#x7684;&#x6574;&#x6570;&#x5E76;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x4F60;&#x7684;&#x5173;&#x6CE8;&#x70B9;&#x9996;&#x5148;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x3002;&#x56F4;&#x7ED5;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x9648;&#x8FF0;&#x4F60;&#x60F3;&#x505A;&#x4EC0;&#x4E48;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Randoms.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Randoms</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>6
10
13
16
17
18
19
</code></pre><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x7ED9; <strong>Random</strong> &#x5BF9;&#x8C61;&#x4E00;&#x4E2A;&#x79CD;&#x5B50;&#xFF08;&#x4EE5;&#x4FBF;&#x7A0B;&#x5E8F;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x65F6;&#x4EA7;&#x751F;&#x76F8;&#x540C;&#x7684;&#x8F93;&#x51FA;&#xFF09;&#x3002;<code>ints()</code> &#x65B9;&#x6CD5;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x6D41;&#x5E76;&#x4E14; <code>ints()</code> &#x65B9;&#x6CD5;&#x6709;&#x591A;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x91CD;&#x8F7D; &#x2014; &#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x9650;&#x5B9A;&#x4E86;&#x6570;&#x503C;&#x4EA7;&#x751F;&#x7684;&#x8FB9;&#x754C;&#x3002;&#x8FD9;&#x5C06;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E2D;&#x95F4;&#x6D41;&#x64CD;&#x4F5C;&#xFF08;intermediate stream operation&#xFF09; <code>distinct()</code> &#x6765;&#x83B7;&#x53D6;&#x5B83;&#x4EEC;&#x7684;&#x975E;&#x91CD;&#x590D;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528; <code>limit()</code> &#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x524D; 7 &#x4E2A;&#x5143;&#x7D20;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>sorted()</code> &#x65B9;&#x6CD5;&#x6392;&#x5E8F;&#x3002;&#x6700;&#x7EC8;&#x4F7F;&#x7528; <code>forEach()</code> &#x65B9;&#x6CD5;&#x904D;&#x5386;&#x8F93;&#x51FA;&#xFF0C;&#x5B83;&#x6839;&#x636E;&#x4F20;&#x9012;&#x7ED9;&#x5B83;&#x7684;&#x51FD;&#x6570;&#x5BF9;&#x6BCF;&#x4E2A;&#x6D41;&#x5BF9;&#x8C61;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F20;&#x9012;&#x4E86;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x663E;&#x793A;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x3002;<code>System.out::println</code> &#x3002;</p>
<p>&#x6CE8;&#x610F; <code>Randoms.java</code> &#x4E2D;&#x6CA1;&#x6709;&#x58F0;&#x660E;&#x4EFB;&#x4F55;&#x53D8;&#x91CF;&#x3002;&#x6D41;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x4F7F;&#x7528;&#x8D4B;&#x503C;&#x6216;&#x53EF;&#x53D8;&#x6570;&#x636E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x6709;&#x72B6;&#x6001;&#x7684;&#x7CFB;&#x7EDF;&#x5EFA;&#x6A21;&#xFF0C;&#x8FD9;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;</p>
<p>&#x58F0;&#x660E;&#x5F0F;&#x7F16;&#x7A0B;&#xFF08;Declarative programming&#xFF09;&#x662F;&#x4E00;&#x79CD;&#xFF1A;&#x58F0;&#x660E;&#x8981;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x800C;&#x975E;&#x600E;&#x4E48;&#x505A;&#x7684;&#x7F16;&#x7A0B;&#x98CE;&#x683C;&#x3002;&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x4E2D;&#x6240;&#x770B;&#x5230;&#x7684;&#x3002;<strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x547D;&#x4EE4;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x5F62;&#x5F0F;&#x66F4;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/ImperativeRandoms.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImperativeRandoms</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> rints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>rints<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> r <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>r <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
            rints<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rints<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>[7, 8, 9, 11, 13, 15, 18]
</code></pre><p>&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x5B9A;&#x4E49;&#x4EFB;&#x4F55;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x4E86; 3 &#x4E2A;&#x53D8;&#x91CF;&#xFF1A; <code>rand</code>&#xFF0C;<code>rints</code> &#x548C; <code>r</code>&#x3002;&#x7531;&#x4E8E; <code>nextInt()</code> &#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x4E0B;&#x9650;&#x7684;&#x539F;&#x56E0;&#xFF08;&#x5176;&#x5185;&#x7F6E;&#x7684;&#x4E0B;&#x9650;&#x6C38;&#x8FDC;&#x4E3A; 0&#xFF09;&#xFF0C;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x66F4;&#x590D;&#x6742;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x751F;&#x6210;&#x989D;&#x5916;&#x7684;&#x503C;&#x6765;&#x8FC7;&#x6EE4;&#x5C0F;&#x4E8E; 5 &#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x8981;&#x7814;&#x7A76;&#x7A0B;&#x5E8F;&#x7684;&#x771F;&#x6B63;&#x610F;&#x56FE;&#xFF0C;&#x800C;&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x4EE3;&#x7801;&#x53EA;&#x662F;&#x544A;&#x8BC9;&#x4E86;&#x4F60;&#x5B83;&#x6B63;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#x3002;&#x8FD9;&#x79CD;&#x8BED;&#x4E49;&#x6E05;&#x6670;&#x6027;&#x4E5F;&#x662F; Java 8 &#x7684;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#x66F4;&#x53D7;&#x63A8;&#x5D07;&#x7684;&#x91CD;&#x8981;&#x539F;&#x56E0;&#x3002;</p>
<p>&#x5728; <code>ImperativeRandoms.java</code> &#x4E2D;&#x663E;&#x5F0F;&#x5730;&#x7F16;&#x5199;&#x8FED;&#x4EE3;&#x673A;&#x5236;&#x79F0;&#x4E3A;&#x5916;&#x90E8;&#x8FED;&#x4EE3;&#x3002;&#x800C;&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#x91C7;&#x7528;&#x5185;&#x90E8;&#x8FED;&#x4EE3;&#xFF0C;&#x8FD9;&#x662F;&#x6D41;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x6838;&#x5FC3;&#x7279;&#x6027;&#x4E4B;&#x4E00;&#x3002;&#x8FD9;&#x79CD;&#x673A;&#x5236;&#x4F7F;&#x5F97;&#x7F16;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x8BFB;&#x6027;&#x66F4;&#x5F3A;&#xFF0C;&#x4E5F;&#x66F4;&#x80FD;&#x5229;&#x7528;&#x591A;&#x6838;&#x5904;&#x7406;&#x5668;&#x7684;&#x4F18;&#x52BF;&#x3002;&#x901A;&#x8FC7;&#x653E;&#x5F03;&#x5BF9;&#x8FED;&#x4EE3;&#x8FC7;&#x7A0B;&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x63A7;&#x5236;&#x6743;&#x4EA4;&#x7ED9;&#x5E76;&#x884C;&#x5316;&#x673A;&#x5236;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x5728;<a href="24-Concurrent-Programming.md">&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</a>&#x4E00;&#x7AE0;&#x4E2D;&#x5B66;&#x4E60;&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x53E6;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x65B9;&#x9762;&#xFF0C;&#x6D41;&#x662F;&#x61D2;&#x52A0;&#x8F7D;&#x7684;&#x3002;&#x8FD9;&#x4EE3;&#x8868;&#x7740;&#x5B83;&#x53EA;&#x5728;&#x7EDD;&#x5BF9;&#x5FC5;&#x8981;&#x65F6;&#x624D;&#x8BA1;&#x7B97;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x6D41;&#x770B;&#x4F5C;&#x201C;&#x5EF6;&#x8FDF;&#x5217;&#x8868;&#x201D;&#x3002;&#x7531;&#x4E8E;&#x8BA1;&#x7B97;&#x5EF6;&#x8FDF;&#xFF0C;&#x6D41;&#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x8868;&#x793A;&#x975E;&#x5E38;&#x5927;&#xFF08;&#x751A;&#x81F3;&#x65E0;&#x9650;&#xFF09;&#x7684;&#x5E8F;&#x5217;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x8003;&#x8651;&#x5185;&#x5B58;&#x95EE;&#x9898;&#x3002;</p>
<h2 class="mume-header" id="%E6%B5%81%E6%94%AF%E6%8C%81">&#x6D41;&#x652F;&#x6301;</h2>

<p>Java &#x8BBE;&#x8BA1;&#x8005;&#x9762;&#x4E34;&#x7740;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x96BE;&#x9898;&#xFF1A;&#x73B0;&#x5B58;&#x7684;&#x5927;&#x91CF;&#x7C7B;&#x5E93;&#x4E0D;&#x4EC5;&#x4E3A; Java &#x6240;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x88AB;&#x5E94;&#x7528;&#x5728;&#x6574;&#x4E2A; Java &#x751F;&#x6001;&#x5708;&#x6570;&#x767E;&#x4E07;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x3002;&#x5982;&#x4F55;&#x5C06;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x6D41;&#x7684;&#x6982;&#x5FF5;&#x878D;&#x5165;&#x5230;&#x73B0;&#x6709;&#x7C7B;&#x5E93;&#x4E2D;&#x5462;&#xFF1F;</p>
<p>&#x6BD4;&#x5982;&#x5728; <strong>Random</strong> &#x4E2D;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x53EA;&#x8981;&#x4E0D;&#x6539;&#x53D8;&#x539F;&#x6709;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x73B0;&#x6709;&#x4EE3;&#x7801;&#x5C31;&#x4E0D;&#x4F1A;&#x53D7;&#x5230;&#x5E72;&#x6270;&#x3002;</p>
<p>&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x63A5;&#x53E3;&#x90E8;&#x5206;&#x600E;&#x4E48;&#x6539;&#x9020;&#x5462;&#xFF1F;&#x7279;&#x522B;&#x662F;&#x6D89;&#x53CA;&#x96C6;&#x5408;&#x7C7B;&#x63A5;&#x53E3;&#x7684;&#x90E8;&#x5206;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x628A;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x8F6C;&#x6362;&#x4E3A;&#x6D41;&#xFF0C;&#x76F4;&#x63A5;&#x5411;&#x63A5;&#x53E3;&#x6DFB;&#x52A0;&#x65B0;&#x65B9;&#x6CD5;&#x4F1A;&#x7834;&#x574F;&#x6240;&#x6709;&#x8001;&#x7684;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;</p>
<p>Java 8 &#x91C7;&#x7528;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#xFF1A;&#x5728;<a href="10-Interfaces.md">&#x63A5;&#x53E3;</a>&#x4E2D;&#x6DFB;&#x52A0;&#x88AB; <code>default</code>&#xFF08;<code>&#x9ED8;&#x8BA4;</code>&#xFF09;&#x4FEE;&#x9970;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#xFF0C;&#x8BBE;&#x8BA1;&#x8005;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x6D41;&#x5F0F;&#xFF08;<em>stream</em>&#xFF09;&#x65B9;&#x6CD5;&#x5E73;&#x6ED1;&#x5730;&#x5D4C;&#x5165;&#x5230;&#x73B0;&#x6709;&#x7C7B;&#x4E2D;&#x3002;&#x6D41;&#x65B9;&#x6CD5;&#x9884;&#x7F6E;&#x7684;&#x64CD;&#x4F5C;&#x51E0;&#x4E4E;&#x5DF2;&#x6EE1;&#x8DB3;&#x4E86;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x6240;&#x6709;&#x7684;&#x9700;&#x6C42;&#x3002;&#x6D41;&#x64CD;&#x4F5C;&#x7684;&#x7C7B;&#x578B;&#x6709;&#x4E09;&#x79CD;&#xFF1A;&#x521B;&#x5EFA;&#x6D41;&#xFF0C;&#x4FEE;&#x6539;&#x6D41;&#x5143;&#x7D20;&#xFF08;&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;&#xFF0C; Intermediate Operations&#xFF09;&#xFF0C;&#x6D88;&#x8D39;&#x6D41;&#x5143;&#x7D20;&#xFF08;&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;&#xFF0C; Terminal Operations&#xFF09;&#x3002;&#x6700;&#x540E;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x901A;&#x5E38;&#x610F;&#x5473;&#x7740;&#x6536;&#x96C6;&#x6D41;&#x5143;&#x7D20;&#xFF08;&#x901A;&#x5E38;&#x662F;&#x5230;&#x96C6;&#x5408;&#x4E2D;&#xFF09;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x6BCF;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x6D41;&#x64CD;&#x4F5C;&#x3002;</p>
<h2 class="mume-header" id="%E6%B5%81%E5%88%9B%E5%BB%BA">&#x6D41;&#x521B;&#x5EFA;</h2>

<p>&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>Stream.of()</code> &#x5F88;&#x5BB9;&#x6613;&#x5730;&#x5C06;&#x4E00;&#x7EC4;&#x5143;&#x7D20;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6D41;&#xFF08;<code>Bubble</code> &#x7C7B;&#x5728;&#x672C;&#x7AE0;&#x7684;&#x540E;&#x9762;&#x5B9A;&#x4E49;&#xFF09;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/StreamOf.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOf</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;It&apos;s &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wonderful &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;day &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;for &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pie!&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">3.14159</span><span class="token punctuation">,</span> <span class="token number">2.718</span><span class="token punctuation">,</span> <span class="token number">1.618</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Bubble(1)
Bubble(2)
Bubble(3)
It&apos;s a wonderful day for pie!
3.14159
2.718
1.618
</code></pre><p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x6BCF;&#x4E2A;&#x96C6;&#x5408;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528; <code>stream()</code> &#x65B9;&#x6CD5;&#x6765;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x6D41;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/CollectionToStream.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollectionToStream</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bubble</span><span class="token punctuation">&gt;</span></span> bubbles <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bubbles<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span>b <span class="token operator">-&gt;</span> b<span class="token punctuation">.</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;It&apos;s a wonderful day for pie!&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        w<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;pi&quot;</span><span class="token punctuation">,</span> <span class="token number">3.14159</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token number">2.718</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;phi&quot;</span><span class="token punctuation">,</span> <span class="token number">1.618</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>6
a pie! It&apos;s for wonderful day
phi: 1.618
e: 2.718
pi: 3.14159
</code></pre><p>&#x5728;&#x521B;&#x5EFA; <code>List&lt;Bubble&gt;</code> &#x5BF9;&#x8C61;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x5730;&#x8C03;&#x7528;&#x6240;&#x6709;&#x96C6;&#x5408;&#x4E2D;&#x90FD;&#x6709;&#x7684; <code>stream()</code>&#x3002;&#x4E2D;&#x95F4;&#x64CD;&#x4F5C; <code>map()</code> &#x4F1A;&#x83B7;&#x53D6;&#x6D41;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;&#x6D41;&#x4E2D;&#x5143;&#x7D20;&#x5E94;&#x7528;&#x64CD;&#x4F5C;&#x4ECE;&#x800C;&#x4EA7;&#x751F;&#x65B0;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x9012;&#x5230;&#x540E;&#x7EED;&#x7684;&#x6D41;&#x4E2D;&#x3002;&#x901A;&#x5E38; <code>map()</code> &#x4F1A;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x5E76;&#x4EA7;&#x751F;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#x4EA7;&#x751F;&#x4E86;&#x7279;&#x6B8A;&#x7684;&#x7528;&#x4E8E;&#x6570;&#x503C;&#x7C7B;&#x578B;&#x7684;&#x6D41;&#x3002;&#x4F8B;&#x5982;&#xFF0C;<code>mapToInt()</code> &#x65B9;&#x6CD5;&#x5C06;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6D41;&#xFF08;object stream&#xFF09;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x5305;&#x542B;&#x6574;&#x578B;&#x6570;&#x5B57;&#x7684; <code>IntStream</code>&#x3002;&#x540C;&#x6837;&#xFF0C;&#x9488;&#x5BF9; <code>Float</code> &#x548C; <code>Double</code> &#x4E5F;&#x6709;&#x7C7B;&#x4F3C;&#x540D;&#x5B57;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x7684; <code>split()</code>&#xFF08;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x6839;&#x636E;&#x53C2;&#x6570;&#x6765;&#x62C6;&#x5206;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x6765;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x53D8;&#x91CF; <code>w</code>&#x3002;&#x7A0D;&#x540E;&#x4F60;&#x4F1A;&#x77E5;&#x9053; <code>split()</code> &#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x5341;&#x5206;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x6839;&#x636E;&#x7A7A;&#x683C;&#x6765;&#x5206;&#x5272;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x4ECE; <strong>Map</strong> &#x96C6;&#x5408;&#x4E2D;&#x4EA7;&#x751F;&#x6D41;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8C03;&#x7528; <code>entrySet()</code> &#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6D41;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x5305;&#x542B;&#x4E00;&#x4E2A; <code>key</code> &#x952E;&#x4EE5;&#x53CA;&#x4E0E;&#x5176;&#x76F8;&#x5173;&#x8054;&#x7684; <code>value</code> &#x503C;&#x3002;&#x7136;&#x540E;&#x5206;&#x522B;&#x8C03;&#x7528; <code>getKey()</code> &#x548C; <code>getValue()</code> &#x83B7;&#x53D6;&#x503C;&#x3002;</p>
<h3 class="mume-header" id="%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%B5%81">&#x968F;&#x673A;&#x6570;&#x6D41;</h3>

<p><code>Random</code> &#x7C7B;&#x88AB;&#x4E00;&#x7EC4;&#x751F;&#x6210;&#x6D41;&#x7684;&#x65B9;&#x6CD5;&#x589E;&#x5F3A;&#x4E86;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/RandomGenerators.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomGenerators</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stream
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;++++++++&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x63A7;&#x5236;&#x4E0A;&#x9650;&#x548C;&#x4E0B;&#x9650;&#xFF1A;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x63A7;&#x5236;&#x6D41;&#x5927;&#x5C0F;&#xFF1A;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x63A7;&#x5236;&#x6D41;&#x7684;&#x5927;&#x5C0F;&#x548C;&#x754C;&#x9650;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">11.5</span><span class="token punctuation">,</span> <span class="token number">12.3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>-1172028779
1717241110
-2014573909
229403722
++++++++
2955289354441303771
3476817843704654257
-8917117694134521474
4941259272818818752
++++++++
0.2613610344283964
0.0508673570556899
0.8037155449603999
0.7620665811558285
++++++++
16
10
11
12
++++++++
65
99
54
58
++++++++
29.86777681078574
24.83968447804611
20.09247112332014
24.046793846338723
++++++++
1169976606
1947946283
++++++++
2970202997824602425
-2325326920272830366
++++++++
0.7024254510631527
0.6648552384607359
++++++++
6
7
7
++++++++
17
12
20
++++++++
12.27872414236691
11.732085449736195
12.196509449817267
++++++++
</code></pre><p>&#x4E3A;&#x4E86;&#x6D88;&#x9664;&#x5197;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x6CDB;&#x578B;&#x65B9;&#x6CD5; <code>show(Stream&lt;T&gt; stream)</code> &#xFF08;&#x5728;&#x8BB2;&#x89E3;&#x6CDB;&#x578B;&#x4E4B;&#x524D;&#x5C31;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x786E;&#x5B9E;&#x6709;&#x70B9;&#x4F5C;&#x5F0A;&#xFF0C;&#x4F46;&#x662F;&#x56DE;&#x62A5;&#x662F;&#x503C;&#x5F97;&#x7684;&#xFF09;&#x3002;&#x7C7B;&#x578B;&#x53C2;&#x6570; <code>T</code> &#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5BF9; <strong>Integer</strong>&#x3001;<strong>Long</strong> &#x548C; <strong>Double</strong> &#x7C7B;&#x578B;&#x90FD;&#x751F;&#x6548;&#x3002;&#x4F46;&#x662F; <strong>Random</strong> &#x7C7B;&#x53EA;&#x80FD;&#x751F;&#x6210;&#x57FA;&#x672C;&#x7C7B;&#x578B; <strong>int</strong>&#xFF0C; <strong>long</strong>&#xFF0C; <strong>double</strong> &#x7684;&#x6D41;&#x3002;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C; <code>boxed()</code> &#x6D41;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x81EA;&#x52A8;&#x5730;&#x628A;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x6210;&#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x88C5;&#x7BB1;&#x7C7B;&#x578B;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97; <code>show()</code> &#x80FD;&#x591F;&#x63A5;&#x53D7;&#x6D41;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <strong>Random</strong> &#x4E3A;&#x4EFB;&#x610F;&#x5BF9;&#x8C61;&#x96C6;&#x5408;&#x521B;&#x5EFA; <strong>Supplier</strong>&#x3002;&#x5982;&#x4E0B;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x63D0;&#x4F9B;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p>Cheese.dat &#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>// streams/Cheese.dat
Not much of a cheese shop really, is it?
Finest in the district, sir.
And what leads you to that conclusion?
Well, it&apos;s so clean.
It&apos;s certainly uncontaminated by cheese.
</code></pre><p>&#x6211;&#x4EEC;&#x901A;&#x8FC7; <strong>File</strong> &#x7C7B;&#x5C06; Cheese.dat &#x6587;&#x4EF6;&#x7684;&#x6240;&#x6709;&#x884C;&#x8BFB;&#x53D6;&#x5230; <code>List&lt;String&gt;</code> &#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/RandomWords.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomWords</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RandomWords</span><span class="token punctuation">(</span><span class="token class-name">String</span> fname<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lines <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllLines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>fname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x7565;&#x8FC7;&#x7B2C;&#x4E00;&#x884C;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> line <span class="token operator">:</span> lines<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> lines<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> word <span class="token operator">:</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;[ .?,]+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                words<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> words<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>words<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> words<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
            <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RandomWords</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>it shop sir the much cheese by conclusion district is
</code></pre><p>&#x5728;&#x8FD9;&#x91CC;&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x66F4;&#x4E3A;&#x590D;&#x6742;&#x7684; <code>split()</code> &#x8FD0;&#x7528;&#x3002;&#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x884C;&#x90FD;&#x88AB; <code>split()</code> &#x901A;&#x8FC7;&#x7A7A;&#x683C;&#x6216;&#x8005;&#x88AB;&#x65B9;&#x62EC;&#x53F7;&#x5305;&#x88F9;&#x7684;&#x4EFB;&#x610F;&#x6807;&#x70B9;&#x7B26;&#x53F7;&#x8FDB;&#x884C;&#x5206;&#x5272;&#x3002;&#x5728;&#x7ED3;&#x675F;&#x65B9;&#x62EC;&#x53F7;&#x540E;&#x9762;&#x7684; <code>+</code> &#x4EE3;&#x8868; <code>+</code> &#x524D;&#x9762;&#x7684;&#x4E1C;&#x897F;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#x6216;&#x8005;&#x591A;&#x6B21;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x6CE8;&#x610F;&#x5230;&#x5728;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#x5FAA;&#x73AF;&#x4F53;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x5F0F;&#x7F16;&#x7A0B;&#xFF08;&#x5916;&#x90E8;&#x8FED;&#x4EE3;&#xFF09;&#x3002;&#x5728;&#x4EE5;&#x540E;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x4F60;&#x751A;&#x81F3;&#x4F1A;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x6D88;&#x9664;&#x8FD9;&#x4E00;&#x70B9;&#x3002;&#x8FD9;&#x79CD;&#x65E7;&#x7684;&#x5F62;&#x5F0F;&#x867D;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x7CDF;&#x7CD5;&#xFF0C;&#x4F46;&#x4F7F;&#x7528;&#x6D41;&#x4F1A;&#x8BA9;&#x4EBA;&#x611F;&#x89C9;&#x66F4;&#x597D;&#x3002;</p>
<p>&#x5728; <code>toString()</code> &#x548C;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#x4F60;&#x770B;&#x5230;&#x4E86; <code>collect()</code> &#x6536;&#x96C6;&#x64CD;&#x4F5C;&#xFF0C;&#x5B83;&#x6839;&#x636E;&#x53C2;&#x6570;&#x6765;&#x7EC4;&#x5408;&#x6240;&#x6709;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x5F53;&#x4F60;&#x4F7F;&#x7528; <strong>Collectors.</strong><code>joining()</code>&#xFF0C;&#x4F60;&#x5C06;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A; <code>String</code> &#x7C7B;&#x578B;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x6839;&#x636E; <code>joining()</code> &#x7684;&#x53C2;&#x6570;&#x6765;&#x8FDB;&#x884C;&#x5206;&#x5272;&#x3002;&#x8FD8;&#x6709;&#x8BB8;&#x591A;&#x4E0D;&#x540C;&#x7684; <code>Collectors</code> &#x7528;&#x4E8E;&#x4EA7;&#x751F;&#x4E0D;&#x540C;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x5728;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x524D;&#x770B;&#x5230;&#x4E86; <strong>Stream.</strong><code>generate()</code> &#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x628A;&#x4EFB;&#x610F;  <code>Supplier&lt;T&gt;</code> &#x7528;&#x4E8E;&#x751F;&#x6210; <code>T</code> &#x7C7B;&#x578B;&#x7684;&#x6D41;&#x3002;</p>
<h3 class="mume-header" id="int-%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%8C%83%E5%9B%B4">int &#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;</h3>

<p><code>IntStream</code> &#x7C7B;&#x63D0;&#x4F9B;&#x4E86;  <code>range()</code> &#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x751F;&#x6210;&#x6574;&#x578B;&#x5E8F;&#x5217;&#x7684;&#x6D41;&#x3002;&#x7F16;&#x5199;&#x5FAA;&#x73AF;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x66F4;&#x52A0;&#x4FBF;&#x5229;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Ranges.java</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span><span class="token class-name">IntStream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ranges</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x4F20;&#x7EDF;&#x65B9;&#x6CD5;:</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            result <span class="token operator">+=</span> i<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// for-in &#x5FAA;&#x73AF;:</span>
        result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            result <span class="token operator">+=</span> i<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x4F7F;&#x7528;&#x6D41;:</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>145
145
145
</code></pre><p>&#x5728;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x6211;&#x4EEC;&#x4F20;&#x7EDF;&#x7F16;&#x5199; <code>for</code> &#x5FAA;&#x73AF;&#x7684;&#x65B9;&#x5F0F;&#xFF1B;&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>range()</code> &#x521B;&#x5EFA;&#x4E86;&#x6D41;&#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x5316;&#x4E3A;&#x6570;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x5728; <code>for-in</code> &#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x4F7F;&#x7528;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x80FD;&#x50CF;&#x7B2C;&#x4E09;&#x79CD;&#x65B9;&#x6CD5;&#x90A3;&#x6837;&#x5168;&#x7A0B;&#x4F7F;&#x7528;&#x6D41;&#x662F;&#x66F4;&#x597D;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5BF9;&#x8303;&#x56F4;&#x4E2D;&#x7684;&#x6570;&#x5B57;&#x8FDB;&#x884C;&#x6C42;&#x548C;&#x3002;&#x5728;&#x6D41;&#x4E2D;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x4F7F;&#x7528; <code>sum()</code> &#x64CD;&#x4F5C;&#x6C42;&#x548C;&#x3002;</p>
<p>&#x6CE8;&#x610F; <strong>IntStream.</strong><code>range()</code> &#x76F8;&#x6BD4; <code>onjava.Range.range()</code> &#x62E5;&#x6709;&#x66F4;&#x591A;&#x7684;&#x9650;&#x5236;&#x3002;&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x5176;&#x53EF;&#x9009;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x540E;&#x8005;&#x5141;&#x8BB8;&#x6B65;&#x957F;&#x5927;&#x4E8E; 1&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x6765;&#x751F;&#x6210;&#x3002;</p>
<p>&#x5B9E;&#x7528;&#x5C0F;&#x529F;&#x80FD; <code>repeat()</code> &#x53EF;&#x4EE5;&#x7528;&#x6765;&#x66FF;&#x6362;&#x7B80;&#x5355;&#x7684; <code>for</code> &#x5FAA;&#x73AF;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// onjava/Repeat.java</span>
<span class="token keyword">package</span> onjava<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span><span class="token class-name">IntStream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Repeat</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token class-name">Runnable</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> action<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5176;&#x4EA7;&#x751F;&#x7684;&#x5FAA;&#x73AF;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Looping.java</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> onjava<span class="token punctuation">.</span><span class="token class-name">Repeat</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Looping</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Looping!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">Looping</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">hi</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Looping!
Looping!
Looping!
Hi!
Hi!
</code></pre><p>&#x539F;&#x5219;&#x4E0A;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x5305;&#x542B;&#x5E76;&#x89E3;&#x91CA; <code>repeat()</code> &#x5E76;&#x4E0D;&#x503C;&#x5F97;&#x3002;&#x8BDA;&#x7136;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5F53;&#x900F;&#x660E;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x53D6;&#x51B3;&#x4E8E;&#x4F60;&#x7684;&#x56E2;&#x961F;&#x548C;&#x516C;&#x53F8;&#x7684;&#x8FD0;&#x4F5C;&#x65B9;&#x5F0F;&#x3002;</p>
<h3 class="mume-header" id="generate">generate()</h3>

<p>&#x53C2;&#x7167; <code>RandomWords.java</code> &#x4E2D; <strong>Stream.</strong><code>generate()</code> &#x642D;&#x914D; <code>Supplier&lt;T&gt;</code> &#x4F7F;&#x7528;&#x7684;&#x4F8B;&#x5B50;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Generator.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Generator</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> letters <span class="token operator">=</span> <span class="token string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span> <span class="token operator">+</span> letters<span class="token punctuation">[</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>letters<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> word <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>YNZBRNYGCFOWZNTCQRGSEGZMMJMROE
</code></pre><p>&#x4F7F;&#x7528; <code>Random.nextInt()</code> &#x65B9;&#x6CD5;&#x6765;&#x6311;&#x9009;&#x5B57;&#x6BCD;&#x8868;&#x4E2D;&#x7684;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x3002;<code>Random.nextInt()</code> &#x7684;&#x53C2;&#x6570;&#x4EE3;&#x8868;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x7684;&#x6700;&#x5927;&#x7684;&#x968F;&#x673A;&#x6570;&#x8303;&#x56F4;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x8FB9;&#x754C;&#x662F;&#x7ECF;&#x8FC7;&#x6DF1;&#x601D;&#x719F;&#x8651;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8981;&#x521B;&#x5EFA;&#x5305;&#x542B;&#x76F8;&#x540C;&#x5BF9;&#x8C61;&#x7684;&#x6D41;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x751F;&#x6210;&#x90A3;&#x4E9B;&#x5BF9;&#x8C61;&#x7684; <code>lambda</code> &#x5230; <code>generate()</code> &#x4E2D;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Duplicator.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Duplicator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;duplicate&quot;</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>duplicate
duplicate
duplicate
</code></pre><p>&#x5982;&#x4E0B;&#x662F;&#x5728;&#x672C;&#x7AE0;&#x4E4B;&#x524D;&#x4F8B;&#x5B50;&#x4E2D;&#x4F7F;&#x7528;&#x8FC7;&#x7684; <code>Bubble</code> &#x7C7B;&#x3002;<strong>&#x6CE8;&#x610F;</strong>&#x5B83;&#x5305;&#x542B;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x9759;&#x6001;&#x751F;&#x6210;&#x5668;&#xFF08;Static generator&#xFF09;&#x65B9;&#x6CD5;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Bubble.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bubble</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        i <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Bubble(&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Bubble</span> <span class="token function">bubbler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bubble</span><span class="token punctuation">(</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x7531;&#x4E8E; <code>bubbler()</code> &#x4E0E; <code>Supplier&lt;Bubble&gt;</code> &#x662F;&#x63A5;&#x53E3;&#x517C;&#x5BB9;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x7ED9; <strong>Stream.</strong><code>generate()</code>&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Bubbles.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bubbles</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Bubble</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">bubbler</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Bubble(0)
Bubble(1)
Bubble(2)
Bubble(3)
Bubble(4)
</code></pre><p>&#x8FD9;&#x662F;&#x521B;&#x5EFA;&#x5355;&#x72EC;&#x5DE5;&#x5382;&#x7C7B;&#xFF08;Separate Factory class&#xFF09;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x3002;&#x5728;&#x5F88;&#x591A;&#x65B9;&#x9762;&#x5B83;&#x66F4;&#x52A0;&#x6574;&#x6D01;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x4E8E;&#x4EE3;&#x7801;&#x7EC4;&#x7EC7;&#x548C;&#x54C1;&#x5473;&#x7684;&#x95EE;&#x9898;&#x2014;&#x2014;&#x4F60;&#x603B;&#x662F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x5DE5;&#x5382;&#x7C7B;&#x3002;</p>
<h3 class="mume-header" id="iterate">iterate()</h3>

<p><strong>Stream.</strong><code>iterate()</code> &#x4EE5;&#x79CD;&#x5B50;&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF09;&#x5F00;&#x5934;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x7ED9;&#x65B9;&#x6CD5;&#xFF08;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF09;&#x3002;&#x65B9;&#x6CD5;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x6DFB;&#x52A0;&#x5230;&#x6D41;&#xFF0C;&#x5E76;&#x5B58;&#x50A8;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x4E0B;&#x6B21;&#x8C03;&#x7528; <code>iterate()</code>&#xFF0C;&#x4F9D;&#x6B21;&#x7C7B;&#x63A8;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>iterate()</code> &#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x6570;&#x5217;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Fibonacci.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fibonacci</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    
    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> result <span class="token operator">=</span> x <span class="token operator">+</span> i<span class="token punctuation">;</span>
            x <span class="token operator">=</span> i<span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                       <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">// &#x8FC7;&#x6EE4;&#x524D; 20 &#x4E2A;</span>
                       <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// &#x7136;&#x540E;&#x53D6; 10 &#x4E2A;</span>
                       <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>6765
10946
17711
28657
46368
75025
121393
196418
317811
514229
</code></pre><p>&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x6570;&#x5217;&#x5C06;&#x6570;&#x5217;&#x4E2D;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6C42;&#x548C;&#x4EE5;&#x4EA7;&#x751F;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;<code>iterate()</code> &#x53EA;&#x80FD;&#x8BB0;&#x5FC6;&#x7ED3;&#x679C;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5229;&#x7528;&#x4E00;&#x4E2A;&#x53D8;&#x91CF; <code>x</code> &#x8FFD;&#x8E2A;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x5728;&#x4E3B;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x89C1;&#x8FC7;&#x7684; <code>skip()</code> &#x64CD;&#x4F5C;&#x3002;&#x5B83;&#x6839;&#x636E;&#x53C2;&#x6570;&#x4E22;&#x5F03;&#x6307;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x6D41;&#x5143;&#x7D20;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4E22;&#x5F03;&#x4E86;&#x524D; 20 &#x4E2A;&#x5143;&#x7D20;&#x3002;</p>
<h3 class="mume-header" id="%E6%B5%81%E7%9A%84%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</h3>

<p>&#x5728;&#x5EFA;&#x9020;&#x8005;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF08;&#x4E5F;&#x79F0;&#x6784;&#x9020;&#x5668;&#x6A21;&#x5F0F;&#xFF09;&#x4E2D;&#xFF0C;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; <code>builder</code> &#x5BF9;&#x8C61;&#xFF0C;&#x4F20;&#x9012;&#x7ED9;&#x5B83;&#x591A;&#x4E2A;&#x6784;&#x9020;&#x5668;&#x4FE1;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x6267;&#x884C;&#x201C;&#x6784;&#x9020;&#x201D;&#x3002;<strong>Stream</strong> &#x5E93;&#x63D0;&#x4F9B;&#x4E86;&#x8FD9;&#x6837;&#x7684; <code>Builder</code>&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x91CD;&#x65B0;&#x5BA1;&#x89C6;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FileToWordsBuilder.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWordsBuilder</span> <span class="token punctuation">{</span>
    <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token class-name">Builder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> builder <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">FileToWordsBuilder</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// &#x7565;&#x8FC7;&#x5F00;&#x5934;&#x7684;&#x6CE8;&#x91CA;&#x884C;</span>
             <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>line <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> w <span class="token operator">:</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;[ .?,]+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                      builder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">FileToWordsBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Not much of a cheese shop really
</code></pre><p><strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x6784;&#x9020;&#x5668;&#x4F1A;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5355;&#x8BCD;&#xFF08;&#x9664;&#x4E86;&#x7B2C;&#x4E00;&#x884C;&#xFF0C;&#x5B83;&#x662F;&#x5305;&#x542B;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4FE1;&#x606F;&#x7684;&#x6CE8;&#x91CA;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x5E76;&#x6CA1;&#x6709;&#x8C03;&#x7528; <code>build()</code>&#x3002;&#x53EA;&#x8981;&#x4F60;&#x4E0D;&#x8C03;&#x7528; <code>stream()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5411; <code>builder</code> &#x5BF9;&#x8C61;&#x4E2D;&#x6DFB;&#x52A0;&#x5355;&#x8BCD;&#x3002;</p>
<p>&#x5728;&#x8BE5;&#x7C7B;&#x7684;&#x66F4;&#x5B8C;&#x6574;&#x5F62;&#x5F0F;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#x7528;&#x4E8E;&#x67E5;&#x770B; <code>build()</code> &#x662F;&#x5426;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x80FD;&#x7684;&#x8BDD;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x5355;&#x8BCD;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5728; <code>Stream.Builder</code> &#x8C03;&#x7528; <code>build()</code> &#x65B9;&#x6CD5;&#x540E;&#x7EE7;&#x7EED;&#x5C1D;&#x8BD5;&#x6DFB;&#x52A0;&#x5355;&#x8BCD;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x3002;</p>
<h3 class="mume-header" id="arrays">Arrays</h3>

<p><code>Arrays</code> &#x7C7B;&#x4E2D;&#x542B;&#x6709;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>stream()</code> &#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x628A;&#x6570;&#x7EC4;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91CD;&#x5199; <code>interfaces/Machine.java</code> &#x4E2D;&#x7684;&#x4E3B;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6D41;&#xFF0C;&#x5E76;&#x5C06; <code>execute()</code> &#x5E94;&#x7528;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Machine2.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> onjava<span class="token punctuation">.</span><span class="token class-name">Operations</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Machine2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Operations</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Bing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Crack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Twist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Operations</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">&quot;Pop&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">Operations</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">execute</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Bing
Crack
Twist
Pop
</code></pre><p><code>new Operations[]</code> &#x8868;&#x8FBE;&#x5F0F;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x4E86; <code>Operations</code> &#x5BF9;&#x8C61;&#x7684;&#x6570;&#x7EC4;&#x3002;</p>
<p><code>stream()</code> &#x540C;&#x6837;&#x53EF;&#x4EE5;&#x4EA7;&#x751F; <strong>IntStream</strong>&#xFF0C;<strong>LongStream</strong> &#x548C; <strong>DoubleStream</strong>&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/ArrayStreams.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayStreams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">3.14159</span><span class="token punctuation">,</span> <span class="token number">2.718</span><span class="token punctuation">,</span> <span class="token number">1.618</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%f &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token number">66</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// &#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5B50;&#x57DF;:</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">37</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>3.141590 2.718000 1.618000
1 3 5
11 22 44 66
7 15 28
</code></pre><p>&#x6700;&#x540E;&#x4E00;&#x6B21; <code>stream()</code> &#x7684;&#x8C03;&#x7528;&#x6709;&#x4E24;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x53C2;&#x6570;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x544A;&#x8BC9; <code>stream()</code> &#x4ECE;&#x6570;&#x7EC4;&#x7684;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x9009;&#x62E9;&#x5143;&#x7D20;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x544A;&#x77E5;&#x5728;&#x54EA;&#x91CC;&#x505C;&#x6B62;&#x3002;&#x6BCF;&#x79CD;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684; <code>stream()</code> &#x90FD;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<h3 class="mume-header" id="%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</h3>

<p>Java &#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5C06;&#x5728;<a href="18-Strings.md">&#x5B57;&#x7B26;&#x4E32;</a>&#x8FD9;&#x4E00;&#x7AE0;&#x8282;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x3002;Java 8 &#x5728; <code>java.util.regex.Pattern</code> &#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x65B9;&#x6CD5; <code>splitAsStream()</code>&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F20;&#x5165;&#x7684;&#x516C;&#x5F0F;&#x5C06;&#x5B57;&#x7B26;&#x5E8F;&#x5217;&#x8F6C;&#x5316;&#x4E3A;&#x6D41;&#x3002;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x9650;&#x5236;&#xFF0C;&#x8F93;&#x5165;&#x53EA;&#x80FD;&#x662F; <strong>CharSequence</strong>&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x5C06;&#x6D41;&#x4F5C;&#x4E3A; <code>splitAsStream()</code> &#x7684;&#x53C2;&#x6570;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x518D;&#x4E00;&#x6B21;&#x67E5;&#x770B;&#x5C06;&#x6587;&#x4EF6;&#x5904;&#x7406;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x8FD9;&#x4E00;&#x6B21;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x6D41;&#x5C06;&#x6587;&#x4EF6;&#x5206;&#x5272;&#x4E3A;&#x5355;&#x72EC;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x63A5;&#x7740;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5C06;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x5316;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FileToWordsRegexp.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWordsRegexp</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> all<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">FileToWordsRegexp</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        all <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// First (comment) line</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Pattern</span>
        <span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;[ .,?]+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splitAsStream</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWordsRegexp</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileToWordsRegexp</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Not much of a cheese shop really is it
</code></pre><p>&#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#x6211;&#x4EEC;&#x8BFB;&#x53D6;&#x4E86;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#xFF08;&#x8DF3;&#x8FC7;&#x7B2C;&#x4E00;&#x884C;&#x6CE8;&#x91CA;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x5355;&#x884C;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x5F53;&#x4F60;&#x8C03;&#x7528; <code>stream()</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x50CF;&#x5F80;&#x5E38;&#x4E00;&#x6837;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x6D41;&#xFF0C;&#x4F46;&#x8FD9;&#x6B21;&#x4F60;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x8C03;&#x7528; <code>stream()</code> &#x5728;&#x5DF2;&#x5B58;&#x50A8;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6D41;&#x3002;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x9650;&#x5236;&#xFF0C;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF1B;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x635F;&#x5931;&#x4E86;&#x6D41;&#x64CD;&#x4F5C;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x4F18;&#x52BF;&#xFF1A;</p>
<ol>
<li>&#x6D41;&#x201C;&#x4E0D;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x201D;&#x3002;&#x5F53;&#x7136;&#x5B83;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x5185;&#x90E8;&#x5B58;&#x50A8;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x53EA;&#x662F;&#x5E8F;&#x5217;&#x7684;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#xFF0C;&#x548C;&#x6301;&#x6709;&#x6574;&#x4E2A;&#x5E8F;&#x5217;&#x5E76;&#x4E0D;&#x76F8;&#x540C;&#x3002;</li>
<li>&#x5B83;&#x4EEC;&#x662F;&#x61D2;&#x52A0;&#x8F7D;&#x8BA1;&#x7B97;&#x7684;&#x3002;</li>
</ol>
<p>&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x7A0D;&#x540E;&#x5C31;&#x4F1A;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
<h2 class="mume-header" id="%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C">&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;</h2>

<p>&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;&#x7528;&#x4E8E;&#x4ECE;&#x4E00;&#x4E2A;&#x6D41;&#x4E2D;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5C06;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x6D41;&#x4ECE;&#x540E;&#x7AEF;&#x8F93;&#x51FA;&#xFF0C;&#x4EE5;&#x8FDE;&#x63A5;&#x5230;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x3002;</p>
<h3 class="mume-header" id="%E8%B7%9F%E8%B8%AA%E5%92%8C%E8%B0%83%E8%AF%95">&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;</h3>

<p><code>peek()</code> &#x64CD;&#x4F5C;&#x7684;&#x76EE;&#x7684;&#x662F;&#x5E2E;&#x52A9;&#x8C03;&#x8BD5;&#x3002;&#x5B83;&#x5141;&#x8BB8;&#x4F60;&#x65E0;&#x4FEE;&#x6539;&#x5730;&#x67E5;&#x770B;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Peeking.java</span>
<span class="token keyword">class</span> <span class="token class-name">Peeking</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">toUpperCase</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">toLowerCase</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Well WELL well it IT it s S s so SO so
</code></pre><p><code>FileToWords</code> &#x7A0D;&#x540E;&#x5B9A;&#x4E49;&#xFF0C;&#x4F46;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x8C8C;&#x4F3C;&#x548C;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#xFF1A;&#x4EA7;&#x751F;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#x7684;&#x6D41;&#x3002;&#x4E4B;&#x540E;&#x5728;&#x5176;&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x65F6;&#x8C03;&#x7528; <code>peek()</code> &#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p>
<p>&#x56E0;&#x4E3A; <code>peek()</code> &#x7B26;&#x5408;&#x65E0;&#x8FD4;&#x56DE;&#x503C;&#x7684; <strong>Consumer</strong> &#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x89C2;&#x5BDF;&#xFF0C;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x5143;&#x7D20;&#x6765;&#x66FF;&#x6362;&#x6D41;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<h3 class="mume-header" id="%E6%B5%81%E5%85%83%E7%B4%A0%E6%8E%92%E5%BA%8F">&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;</h3>

<p>&#x5728; <code>Randoms.java</code> &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x719F;&#x8BC6;&#x4E86; <code>sorted()</code> &#x7684;&#x9ED8;&#x8BA4;&#x6BD4;&#x8F83;&#x5668;&#x5B9E;&#x73B0;&#x3002;&#x5176;&#x5B9E;&#x5B83;&#x8FD8;&#x6709;&#x53E6;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;&#x4F20;&#x5165;&#x4E00;&#x4E2A; <strong>Comparator</strong> &#x53C2;&#x6570;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/SortedComparator.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SortedComparator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">reverseOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>you what to the that sir leads in district And
</code></pre><p><code>sorted()</code> &#x9884;&#x8BBE;&#x4E86;&#x4E00;&#x4E9B;&#x9ED8;&#x8BA4;&#x7684;&#x6BD4;&#x8F83;&#x5668;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x53CD;&#x8F6C;&#x201C;&#x81EA;&#x7136;&#x6392;&#x5E8F;&#x201D;&#x3002;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x628A; Lambda &#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9; <code>sorted()</code>&#x3002;</p>
<h3 class="mume-header" id="%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0">&#x79FB;&#x9664;&#x5143;&#x7D20;</h3>

<ul>
<li>
<p><code>distinct()</code>&#xFF1A;&#x5728; <code>Randoms.java</code> &#x7C7B;&#x4E2D;&#x7684; <code>distinct()</code> &#x53EF;&#x7528;&#x4E8E;&#x6D88;&#x9664;&#x6D41;&#x4E2D;&#x7684;&#x91CD;&#x590D;&#x5143;&#x7D20;&#x3002;&#x76F8;&#x6BD4;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; <strong>Set</strong> &#x96C6;&#x5408;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;&#x8981;&#x5C11;&#x5F97;&#x591A;&#x3002;</p>
</li>
<li>
<p><code>filter(Predicate)</code>&#xFF1A;&#x8FC7;&#x6EE4;&#x64CD;&#x4F5C;&#x4F1A;&#x4FDD;&#x7559;&#x4E0E;&#x4F20;&#x9012;&#x8FDB;&#x53BB;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x4E3A; <code>true</code> &#x5143;&#x7D20;&#x3002;</p>
</li>
</ul>
<p>&#x5728;&#x4E0B;&#x4F8B;&#x4E2D;&#xFF0C;<code>isPrime()</code> &#x4F5C;&#x4E3A;&#x8FC7;&#x6EE4;&#x5668;&#x51FD;&#x6570;&#xFF0C;&#x7528;&#x4E8E;&#x68C0;&#x6D4B;&#x8D28;&#x6570;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Prime.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span><span class="token class-name">LongStream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Prime</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">noneMatch</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">LongStream</span> <span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> i <span class="token operator">-&gt;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Prime</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">isPrime</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Prime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Prime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>2 3 5 7 11 13 17 19 23 29
467 479 487 491 499 503 509 521 523 541
</code></pre><p><code>rangeClosed()</code> &#x5305;&#x542B;&#x4E86;&#x4E0A;&#x9650;&#x503C;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x6574;&#x9664;&#xFF0C;&#x5373;&#x4F59;&#x6570;&#x4E0D;&#x7B49;&#x4E8E; 0&#xFF0C;&#x5219; <code>noneMatch()</code> &#x64CD;&#x4F5C;&#x8FD4;&#x56DE; <code>true</code>&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4EFB;&#x4F55;&#x7B49;&#x4E8E; 0 &#x7684;&#x7ED3;&#x679C;&#x5219;&#x8FD4;&#x56DE; <code>false</code>&#x3002; <code>noneMatch()</code> &#x64CD;&#x4F5C;&#x4E00;&#x65E6;&#x6709;&#x5931;&#x8D25;&#x5C31;&#x4F1A;&#x9000;&#x51FA;&#x3002;</p>
<h3 class="mume-header" id="%E5%BA%94%E7%94%A8%E5%87%BD%E6%95%B0%E5%88%B0%E5%85%83%E7%B4%A0">&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;</h3>

<ul>
<li>
<p><code>map(Function)</code>&#xFF1A;&#x5C06;&#x51FD;&#x6570;&#x64CD;&#x4F5C;&#x5E94;&#x7528;&#x5728;&#x8F93;&#x5165;&#x6D41;&#x7684;&#x5143;&#x7D20;&#x4E2D;&#xFF0C;&#x5E76;&#x5C06;&#x8FD4;&#x56DE;&#x503C;&#x4F20;&#x9012;&#x5230;&#x8F93;&#x51FA;&#x6D41;&#x4E2D;&#x3002;</p>
</li>
<li>
<p><code>mapToInt(ToIntFunction)</code>&#xFF1A;&#x64CD;&#x4F5C;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x662F; <strong>IntStream</strong>&#x3002;</p>
</li>
<li>
<p><code>mapToLong(ToLongFunction)</code>&#xFF1A;&#x64CD;&#x4F5C;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x662F; <strong>LongStream</strong>&#x3002;</p>
</li>
<li>
<p><code>mapToDouble(ToDoubleFunction)</code>&#xFF1A;&#x64CD;&#x4F5C;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x7ED3;&#x679C;&#x662F; <strong>DoubleStream</strong>&#x3002;</p>
</li>
</ul>
<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>map()</code> &#x6620;&#x5C04;&#x591A;&#x79CD;&#x51FD;&#x6570;&#x5230;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6D41;&#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FunctionMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span>
    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;add brackets&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> s<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
        s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>---( add brackets )---
[12]
[]
[23]
[45]
---( Increment )---
13
24
46
---( Replace )---
19
93
45
---( Take last digit )---
2
3
5
</code></pre><p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x81EA;&#x589E;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>Integer.parseInt()</code> &#x5C1D;&#x8BD5;&#x5C06;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x5316;&#x4E3A;&#x6574;&#x6570;&#x3002;&#x5982;&#x679C;&#x5B57;&#x7B26;&#x4E32;&#x4E0D;&#x80FD;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6574;&#x6570;&#x5C31;&#x4F1A;&#x629B;&#x51FA; <strong>NumberFormatException</strong> &#x5F02;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x987B;&#x56DE;&#x8FC7;&#x5934;&#x6765;&#x5C06;&#x539F;&#x59CB;&#x5B57;&#x7B26;&#x4E32;&#x653E;&#x56DE;&#x5230;&#x8F93;&#x51FA;&#x6D41;&#x4E2D;&#x3002;</p>
<p>&#x5728;&#x4EE5;&#x4E0A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;<code>map()</code> &#x5C06;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6620;&#x5C04;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x548C;&#x63A5;&#x6536;&#x7C7B;&#x578B;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4ECE;&#x800C;&#x6539;&#x53D8;&#x6D41;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FunctionMap2.java</span>
<span class="token comment">// Different input and output types &#xFF08;&#x4E0D;&#x540C;&#x7684;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7C7B;&#x578B;&#xFF09;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Numbered</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    <span class="token class-name">Numbered</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>n <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Numbered(&quot;</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Numbered</span><span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Numbered(1)
Numbered(5)
Numbered(7)
Numbered(9)
Numbered(11)
Numbered(13)
</code></pre><p>&#x6211;&#x4EEC;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x6574;&#x6570;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x5668; <code>Numbered::new</code> &#x8F6C;&#x5316;&#x6210;&#x4E3A; <code>Numbered</code> &#x7C7B;&#x578B;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F7F;&#x7528; <strong>Function</strong> &#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x6570;&#x503C;&#x7C7B;&#x578B;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x5408;&#x9002;&#x7684; <code>mapTo&#x6570;&#x503C;&#x7C7B;&#x578B;</code> &#x8FDB;&#x884C;&#x66FF;&#x4EE3;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FunctionMap3.java</span>
<span class="token comment">// Producing numeric output streams&#xFF08; &#x4EA7;&#x751F;&#x6570;&#x503C;&#x8F93;&#x51FA;&#x6D41;&#xFF09;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">parseInt</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;19&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToLong</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">parseLong</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1.9&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToDouble</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">parseDouble</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%f &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>5 7 9
17 19 23
17.000000 1.900000 0.230000
</code></pre><p>&#x9057;&#x61BE;&#x7684;&#x662F;&#xFF0C;Java &#x8BBE;&#x8BA1;&#x8005;&#x5E76;&#x6CA1;&#x6709;&#x5C3D;&#x6700;&#x5927;&#x52AA;&#x529B;&#x53BB;&#x6D88;&#x9664;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x3002;</p>
<h3 class="mume-header" id="%E5%9C%A8-map-%E4%B8%AD%E7%BB%84%E5%90%88%E6%B5%81">&#x5728; <code>map()</code> &#x4E2D;&#x7EC4;&#x5408;&#x6D41;</h3>

<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x4F20;&#x5165;&#x7684;&#x5143;&#x7D20;&#x6D41;&#xFF0C;&#x5E76;&#x4E14;&#x6253;&#x7B97;&#x5BF9;&#x6D41;&#x5143;&#x7D20;&#x4F7F;&#x7528; <code>map()</code> &#x51FD;&#x6570;&#x3002;&#x73B0;&#x5728;&#x4F60;&#x5DF2;&#x7ECF;&#x627E;&#x5230;&#x4E86;&#x4E00;&#x4E9B;&#x53EF;&#x7231;&#x5E76;&#x72EC;&#x4E00;&#x65E0;&#x4E8C;&#x7684;&#x51FD;&#x6570;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x95EE;&#x9898;&#x6765;&#x4E86;&#xFF1A;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x529F;&#x80FD;&#x662F;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6D41;&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x5374;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6D41;&#x7684;&#x6D41;&#x3002;</p>
<p><code>flatMap()</code> &#x505A;&#x4E86;&#x4E24;&#x4EF6;&#x4E8B;&#xFF1A;&#x5C06;&#x4EA7;&#x751F;&#x6D41;&#x7684;&#x51FD;&#x6570;&#x5E94;&#x7528;&#x5728;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x4E0A;&#xFF08;&#x4E0E; <code>map()</code> &#x6240;&#x505A;&#x7684;&#x76F8;&#x540C;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6BCF;&#x4E2A;&#x6D41;&#x90FD;&#x6241;&#x5E73;&#x5316;&#x4E3A;&#x5143;&#x7D20;&#xFF0C;&#x56E0;&#x800C;&#x6700;&#x7EC8;&#x4EA7;&#x751F;&#x7684;&#x4EC5;&#x4EC5;&#x662F;&#x5143;&#x7D20;&#x3002;</p>
<p><code>flatMap(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F;&#x6D41;&#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p><code>flatMapToInt(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F; <code>IntStream</code> &#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p><code>flatMapToLong(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F; <code>LongStream</code> &#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p><code>flatMapToDouble(Function)</code>&#xFF1A;&#x5F53; <code>Function</code> &#x4EA7;&#x751F; <code>DoubleStream</code> &#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5F04;&#x6E05;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x4ECE;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x523B;&#x610F;&#x8BBE;&#x8BA1;&#x7684;&#x51FD;&#x6570;&#x7ED9;  <code>map()</code> &#x5F00;&#x59CB;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x5E76;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6D41;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/StreamOfStreams.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfStreams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Gonzo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Kermit&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Beaker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>e<span class="token operator">-&gt;</span> e<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>java.util.stream.ReferencePipeline$Head
java.util.stream.ReferencePipeline$Head
java.util.stream.ReferencePipeline$Head
</code></pre><p>&#x6211;&#x4EEC;&#x5929;&#x771F;&#x5730;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5F97;&#x5230;&#x5B57;&#x7B26;&#x4E32;&#x6D41;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x5F97;&#x5230;&#x7684;&#x5374;&#x662F;&#x201C;Head&#x201D;&#x6D41;&#x7684;&#x6D41;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>flatMap()</code> &#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FlatMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FlatMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Gonzo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fozzie&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Beaker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Gonzo
Fozzie
Beaker
Gonzo
Fozzie
Beaker
Gonzo
Fozzie
Beaker
</code></pre><p>&#x4ECE;&#x6620;&#x5C04;&#x8FD4;&#x56DE;&#x7684;&#x6BCF;&#x4E2A;&#x6D41;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x6241;&#x5E73;&#x4E3A;&#x7EC4;&#x6210;&#x5B83;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x6F14;&#x793A;&#xFF0C;&#x6211;&#x4EEC;&#x4ECE;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6D41;&#x5F00;&#x59CB;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x6BCF;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x53BB;&#x521B;&#x5EFA;&#x66F4;&#x591A;&#x7684;&#x968F;&#x673A;&#x6570;&#x3002;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/StreamOfRandoms.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfRandoms</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">flatMapToInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>
        rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>58 -1 55 93 -1 61 61 29 -1 68 0 22 7 -1 88 28 51 89 9 -1
</code></pre><p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5F15;&#x5165;&#x4E86; <code>concat()</code>&#xFF0C;&#x5B83;&#x4EE5;&#x53C2;&#x6570;&#x987A;&#x5E8F;&#x7EC4;&#x5408;&#x4E24;&#x4E2A;&#x6D41;&#x3002; &#x5982;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x6BCF;&#x4E2A;&#x968F;&#x673A; <code>Integer</code> &#x6D41;&#x7684;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; -1 &#x4F5C;&#x4E3A;&#x6807;&#x8BB0;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6700;&#x7EC8;&#x6D41;&#x786E;&#x5B9E;&#x662F;&#x4ECE;&#x4E00;&#x7EC4;&#x6241;&#x5E73;&#x6D41;&#x4E2D;&#x521B;&#x5EFA;&#x7684;&#x3002;</p>
<p>&#x56E0;&#x4E3A; <code>rand.ints()</code> &#x4EA7;&#x751F;&#x7684;&#x662F;&#x4E00;&#x4E2A; <code>IntStream</code>&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5FC5;&#x987B;&#x4F7F;&#x7528; <code>flatMap()</code>&#x3001;<code>concat()</code> &#x548C; <code>of()</code> &#x7684;&#x7279;&#x5B9A;&#x6574;&#x6570;&#x5F62;&#x5F0F;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x4E00;&#x4E0B;&#x5C06;&#x6587;&#x4EF6;&#x5212;&#x5206;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x6211;&#x4EEC;&#x6700;&#x540E;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x662F; <strong>FileToWordsRegexp.java</strong>&#xFF0C;&#x5B83;&#x7684;&#x95EE;&#x9898;&#x662F;&#x9700;&#x8981;&#x5C06;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x8BFB;&#x5165;&#x884C;&#x5217;&#x8868;&#x4E2D; &#x2014;&#x2014; &#x663E;&#x7136;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x8BE5;&#x5217;&#x8868;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x771F;&#x6B63;&#x60F3;&#x8981;&#x7684;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E0D;&#x9700;&#x8981;&#x4E2D;&#x95F4;&#x5B58;&#x50A8;&#x5C42;&#x7684;&#x5355;&#x8BCD;&#x6D41;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x4F7F;&#x7528; <code>flatMap()</code> &#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FileToWords.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex</span><span class="token punctuation">.</span><span class="token class-name">Pattern</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWords</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// First (comment) line</span>
        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>line <span class="token operator">-&gt;</span>
        <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splitAsStream</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><code>stream()</code> &#x73B0;&#x5728;&#x662F;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5B8C;&#x6210;&#x6574;&#x4E2A;&#x6D41;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;<code>\\W+</code> &#x662F;&#x4E00;&#x4E2A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x3002;&#x4ED6;&#x8868;&#x793A;&#x201C;&#x975E;&#x5355;&#x8BCD;&#x5B57;&#x7B26;&#x201D;&#xFF0C;<code>+</code> &#x8868;&#x793A;&#x201C;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#x6216;&#x8005;&#x591A;&#x6B21;&#x201D;&#x3002;&#x5C0F;&#x5199;&#x5F62;&#x5F0F;&#x7684; <code>\\w</code> &#x8868;&#x793A;&#x201C;&#x5355;&#x8BCD;&#x5B57;&#x7B26;&#x201D;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x662F; <code>Pattern.compile().splitAsStream()</code> &#x4EA7;&#x751F;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x6D41;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5F53;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x60F3;&#x8981;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5355;&#x8BCD;&#x6D41;&#x65F6;&#xFF0C;&#x5728;&#x4F20;&#x5165;&#x7684;&#x884C;&#x6D41;&#xFF08;stream of lines&#xFF09;&#x4E0A;&#x8C03;&#x7528; <code>map()</code> &#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x6D41;&#x7684;&#x6D41;&#x3002;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C;<code>flatMap()</code>  &#x53EF;&#x4EE5;&#x5C06;&#x5143;&#x7D20;&#x6D41;&#x7684;&#x6D41;&#x6241;&#x5E73;&#x5316;&#x4E3A;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5143;&#x7D20;&#x6D41;&#x3002;&#x6216;&#x8005;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>String.split()</code> &#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x5176;&#x53EF;&#x4EE5;&#x88AB; <code>Arrays.stream()</code> &#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6D41;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>line <span class="token operator">-&gt;</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><p>&#x6709;&#x4E86;&#x771F;&#x6B63;&#x7684;&#x3001;&#x800C;&#x975E; <code>FileToWordsRegexp.java</code> &#x4E2D;&#x57FA;&#x4E8E;&#x96C6;&#x5408;&#x5B58;&#x50A8;&#x7684;&#x6D41;&#xFF0C;&#x6211;&#x4EEC;&#x6BCF;&#x6B21;&#x4F7F;&#x7528;&#x90FD;&#x5FC5;&#x987B;&#x4ECE;&#x5934;&#x521B;&#x5EFA;&#xFF0C;&#x56E0;&#x4E3A;&#x6D41;&#x5E76;&#x4E0D;&#x80FD;&#x88AB;&#x590D;&#x7528;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/FileToWordsTest.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileToWordsTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s &quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s &quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Not much of a cheese shop really
is it
</code></pre><p>&#x5728; <code>System.out.format()</code> &#x4E2D;&#x7684; <code>%s</code> &#x8868;&#x660E;&#x53C2;&#x6570;&#x4E3A; <strong>String</strong> &#x7C7B;&#x578B;&#x3002;</p>
<h2 class="mume-header" id="optional%E7%B1%BB">Optional&#x7C7B;</h2>

<p>&#x5728;&#x6211;&#x4EEC;&#x5B66;&#x4E60;&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;&#xFF08;Terminal Operations&#xFF09;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x8003;&#x8651;&#x5982;&#x679C;&#x4F60;&#x5728;&#x4E00;&#x4E2A;&#x7A7A;&#x6D41;&#x4E2D;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x3002;&#x6211;&#x4EEC;&#x559C;&#x6B22;&#x4E3A;&#x4E86;&#x201C;happy path&#x201D;&#x800C;&#x5C06;&#x6D41;&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x5E76;&#x5047;&#x8BBE;&#x6D41;&#x4E0D;&#x4F1A;&#x88AB;&#x4E2D;&#x65AD;&#x3002;&#x5728;&#x6D41;&#x4E2D;&#x653E;&#x7F6E; <code>null</code> &#x662F;&#x5F88;&#x597D;&#x7684;&#x4E2D;&#x65AD;&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x4E48;&#x662F;&#x5426;&#x6709;&#x67D0;&#x79CD;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4F5C;&#x4E3A;&#x6D41;&#x5143;&#x7D20;&#x7684;&#x6301;&#x6709;&#x8005;&#xFF0C;&#x5373;&#x4F7F;&#x67E5;&#x770B;&#x7684;&#x5143;&#x7D20;&#x4E0D;&#x5B58;&#x5728;&#x4E5F;&#x80FD;&#x53CB;&#x597D;&#x5730;&#x63D0;&#x793A;&#x6211;&#x4EEC;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#xFF09;&#xFF1F;</p>
<p><strong>Optional</strong> &#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8FD9;&#x6837;&#x7684;&#x529F;&#x80FD;&#x3002;&#x4E00;&#x4E9B;&#x6807;&#x51C6;&#x6D41;&#x64CD;&#x4F5C;&#x8FD4;&#x56DE; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x9884;&#x671F;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x5B58;&#x5728;&#x3002;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><code>findFirst()</code> &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x5219;&#x8FD4;&#x56DE; <strong>Optional.empty</strong></li>
<li><code>findAny()</code> &#x8FD4;&#x56DE;&#x5305;&#x542B;&#x4EFB;&#x610F;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x5219;&#x8FD4;&#x56DE; <strong>Optional.empty</strong></li>
<li><code>max()</code> &#x548C; <code>min()</code> &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x6700;&#x5927;&#x503C;&#x6216;&#x8005;&#x6700;&#x5C0F;&#x503C;&#x7684; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x5219;&#x8FD4;&#x56DE; <strong>Optional.empty</strong></li>
</ul>
<p><code>reduce()</code> &#x4E0D;&#x518D;&#x4EE5; <code>identity</code> &#x5F62;&#x5F0F;&#x5F00;&#x5934;&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;&#xFF08;<code>identity</code> &#x5BF9;&#x8C61;&#x6210;&#x4E3A;&#x5176;&#x4ED6;&#x5F62;&#x5F0F;&#x7684; <code>reduce()</code> &#x7684;&#x9ED8;&#x8BA4;&#x7ED3;&#x679C;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x5B58;&#x5728;&#x7A7A;&#x7ED3;&#x679C;&#x7684;&#x98CE;&#x9669;&#xFF09;</p>
<p>&#x5BF9;&#x4E8E;&#x6570;&#x5B57;&#x6D41; <strong>IntStream</strong>&#x3001;<strong>LongStream</strong> &#x548C; <strong>DoubleStream</strong>&#xFF0C;<code>average()</code> &#x4F1A;&#x5C06;&#x7ED3;&#x679C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4EE5;&#x9632;&#x6B62;&#x6D41;&#x4E3A;&#x7A7A;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5BF9;&#x7A7A;&#x6D41;&#x8FDB;&#x884C;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x7684;&#x7B80;&#x5355;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/OptionalsFromEmptyStreams.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalsFromEmptyStreams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> s1 <span class="token operator">+</span> s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Optional.empty
Optional.empty
Optional.empty
Optional.empty
Optional.empty
OptionalDouble.empty
</code></pre><p>&#x5F53;&#x6D41;&#x4E3A;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x4F60;&#x4F1A;&#x83B7;&#x5F97;&#x4E00;&#x4E2A; <strong>Optional.empty</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;<strong>Optional</strong> &#x62E5;&#x6709; <code>toString()</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5C55;&#x793A;&#x6709;&#x7528;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x7A7A;&#x6D41;&#x662F;&#x901A;&#x8FC7; <code>Stream.&lt;String&gt;empty()</code> &#x521B;&#x5EFA;&#x7684;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4E0A;&#x4E0B;&#x6587;&#x73AF;&#x5883;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8C03;&#x7528; <code>Stream.empty()</code>&#xFF0C;Java &#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF1B;&#x8FD9;&#x4E2A;&#x8BED;&#x6CD5;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x5982;&#x679C;&#x7F16;&#x8BD1;&#x5668;&#x62E5;&#x6709;&#x4E86;&#x8DB3;&#x591F;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x8C03;&#x7528; <code>empty()</code> &#x65F6;&#x63A8;&#x65AD;&#x7C7B;&#x578B;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x5C55;&#x793A;&#x4E86; <strong>Optional</strong> &#x7684;&#x4E24;&#x4E2A;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/OptionalBasics.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalBasics</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">else</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing inside!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Epithets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Epithets
Nothing inside!
</code></pre><p>&#x5F53;&#x4F60;&#x63A5;&#x6536;&#x5230; <strong>Optional</strong> &#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5E94;&#x9996;&#x5148;&#x8C03;&#x7528; <code>isPresent()</code> &#x68C0;&#x67E5;&#x5176;&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;&#x5143;&#x7D20;&#x3002;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF0C;&#x53EF;&#x4F7F;&#x7528; <code>get()</code> &#x83B7;&#x53D6;&#x3002;</p>
<h3 class="mume-header" id="%E4%BE%BF%E5%88%A9%E5%87%BD%E6%95%B0">&#x4FBF;&#x5229;&#x51FD;&#x6570;</h3>

<p>&#x6709;&#x8BB8;&#x591A;&#x4FBF;&#x5229;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x89E3;&#x5305; <strong>Optional</strong> &#xFF0C;&#x8FD9;&#x7B80;&#x5316;&#x4E86;&#x4E0A;&#x8FF0;&#x201C;&#x5BF9;&#x6240;&#x5305;&#x542B;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x68C0;&#x67E5;&#x548C;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x201D;&#x7684;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<ul>
<li><code>ifPresent(Consumer)</code>&#xFF1A;&#x5F53;&#x503C;&#x5B58;&#x5728;&#x65F6;&#x8C03;&#x7528; <strong>Consumer</strong>&#xFF0C;&#x5426;&#x5219;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x505A;&#x3002;</li>
<li><code>orElse(otherObject)</code>&#xFF1A;&#x5982;&#x679C;&#x503C;&#x5B58;&#x5728;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x751F;&#x6210; <strong>otherObject</strong>&#x3002;</li>
<li><code>orElseGet(Supplier)</code>&#xFF1A;&#x5982;&#x679C;&#x503C;&#x5B58;&#x5728;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; <strong>Supplier</strong> &#x51FD;&#x6570;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x53EF;&#x66FF;&#x4EE3;&#x5BF9;&#x8C61;&#x3002;</li>
<li><code>orElseThrow(Supplier)</code>&#xFF1A;&#x5982;&#x679C;&#x503C;&#x5B58;&#x5728;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; <strong>Supplier</strong> &#x51FD;&#x6570;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x3002;</li>
</ul>
<p>&#x5982;&#x4E0B;&#x662F;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x4FBF;&#x5229;&#x51FD;&#x6570;&#x7684;&#x7B80;&#x5355;&#x6F14;&#x793A;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Optionals.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Optionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">basics</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">else</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing inside!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        optString<span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElse</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Nada&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
        optString<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Generated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Supplied&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Caught &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> testName<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> cos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; === &quot;</span> <span class="token operator">+</span> testName <span class="token operator">+</span> <span class="token string">&quot; === &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cos<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Epithets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cos<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;basics&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">basics</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ifPresent&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">ifPresent</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElse&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">orElse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElseGet&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">orElseGet</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElseThrow&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">orElseThrow</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>=== basics ===
Epithets
Nothing inside!
=== ifPresent ===
Epithets
=== orElse ===
Epithets
Nada
=== orElseGet ===
Epithets
Generated
=== orElseThrow ===
Epithets
Caught java.lang.Exception: Supplied
</code></pre><p><code>test()</code> &#x901A;&#x8FC7;&#x4F20;&#x5165;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x9002;&#x7528;&#x7684; <strong>Consumer</strong> &#x6765;&#x907F;&#x514D;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#x3002;</p>
<p><code>orElseThrow()</code> &#x901A;&#x8FC7; <strong>catch</strong> &#x5173;&#x952E;&#x5B57;&#x6765;&#x6355;&#x83B7;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#x3002;&#x66F4;&#x591A;&#x7EC6;&#x8282;&#xFF0C;&#x5C06;&#x5728; <a href="./15-Exceptions.md">&#x5F02;&#x5E38;</a> &#x8FD9;&#x4E00;&#x7AE0;&#x8282;&#x4E2D;&#x5B66;&#x4E60;&#x3002;</p>
<h3 class="mume-header" id="%E5%88%9B%E5%BB%BA-optional">&#x521B;&#x5EFA; Optional</h3>

<p>&#x5F53;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x52A0;&#x5165; <strong>Optional</strong> &#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762; 3 &#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li><code>empty()</code>&#xFF1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x7A7A; <strong>Optional</strong>&#x3002;</li>
<li><code>of(value)</code>&#xFF1A;&#x5C06;&#x4E00;&#x4E2A;&#x975E;&#x7A7A;&#x503C;&#x5305;&#x88C5;&#x5230; <strong>Optional</strong> &#x91CC;&#x3002;</li>
<li><code>ofNullable(value)</code>&#xFF1A;&#x9488;&#x5BF9;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x4E3A;&#x7A7A;&#x7684;&#x503C;&#xFF0C;&#x4E3A;&#x7A7A;&#x65F6;&#x81EA;&#x52A8;&#x751F;&#x6210; <strong>Optional.empty</strong>&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x503C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x6765;&#x770B;&#x770B;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/CreatingOptionals.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">CreatingOptionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> testName<span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> opt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; === &quot;</span> <span class="token operator">+</span> testName <span class="token operator">+</span> <span class="token string">&quot; === &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;empty&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;of&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Howdy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;of&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ofNullable&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token string">&quot;Hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ofNullable&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>=== empty ===
Null
=== of ===
Howdy
java.lang.NullPointerException
=== ofNullable ===
Hi
=== ofNullable ===
Null
</code></pre><p>&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;&#x4F20;&#x9012; <code>null</code> &#x5230; <code>of()</code> &#x6765;&#x521B;&#x5EFA; <code>Optional</code> &#x5BF9;&#x8C61;&#x3002;&#x6700;&#x5B89;&#x5168;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#xFF0C; &#x4F7F;&#x7528; <code>ofNullable()</code> &#x6765;&#x4F18;&#x96C5;&#x5730;&#x5904;&#x7406; <code>null</code>&#x3002;</p>
<h3 class="mume-header" id="optional-%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C">Optional &#x5BF9;&#x8C61;&#x64CD;&#x4F5C;</h3>

<p>&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x6D41;&#x7BA1;&#x9053;&#x751F;&#x6210;&#x4E86; <strong>Optional</strong> &#x5BF9;&#x8C61;&#xFF0C;&#x4E0B;&#x9762; 3 &#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4F7F;&#x5F97; <strong>Optional</strong> &#x7684;&#x540E;&#x7EED;&#x80FD;&#x505A;&#x66F4;&#x591A;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p>
<ul>
<li>
<p><code>filter(Predicate)</code>&#xFF1A;&#x5C06; <strong>Predicate</strong> &#x5E94;&#x7528;&#x4E8E; <strong>Optional</strong> &#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x5F53; <strong>Optional</strong> &#x4E0D;&#x6EE1;&#x8DB3; <strong>Predicate</strong> &#x65F6;&#x8FD4;&#x56DE;&#x7A7A;&#x3002;&#x5982;&#x679C; <strong>Optional</strong> &#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x3002;</p>
</li>
<li>
<p><code>map(Function)</code>&#xFF1A;&#x5982;&#x679C; <strong>Optional</strong> &#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E94;&#x7528; <strong>Function</strong>  &#x4E8E; <strong>Optional</strong> &#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;&#x5426;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE; <strong>Optional.empty</strong>&#x3002;</p>
</li>
<li>
<p><code>flatMap(Function)</code>&#xFF1A;&#x540C; <code>map()</code>&#xFF0C;&#x4F46;&#x662F;&#x63D0;&#x4F9B;&#x7684;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x5C06;&#x7ED3;&#x679C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x56E0;&#x6B64; <code>flatMap()</code> &#x4E0D;&#x4F1A;&#x5728;&#x6700;&#x540E;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x5305;&#x88C5;&#x3002;</p>
</li>
</ul>
<p>&#x4EE5;&#x4E0A;&#x65B9;&#x6CD5;&#x90FD;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x6570;&#x503C;&#x578B; <strong>Optional</strong>&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x6D41;&#x7684; <code>filter()</code> &#x4F1A;&#x5728; <strong>Predicate</strong> &#x8FD4;&#x56DE; <code>false</code> &#x65F6;&#x79FB;&#x9664;&#x6D41;&#x5143;&#x7D20;&#x3002;&#x800C; <code>Optional.filter()</code> &#x5728;&#x5931;&#x8D25;&#x65F6;&#x4E0D;&#x4F1A;&#x5220;&#x9664; <strong>Optional</strong>&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x5176;&#x4FDD;&#x7559;&#x4E0B;&#x6765;&#xFF0C;&#x5E76;&#x8F6C;&#x5316;&#x4E3A;&#x7A7A;&#x3002;&#x4E0B;&#x9762;&#x8BF7;&#x770B;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/OptionalFilter.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Baz&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bingo&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pred<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;false&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;str != \&quot;\&quot;&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> str <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;str.length() == 3&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;startsWith(\&quot;B\&quot;)&quot;</span><span class="token punctuation">,</span>
                str <span class="token operator">-&gt;</span> str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>---( true )---
Optional[Foo]
Optional[]
Optional[Bar]
Optional[Baz]
Optional[Bingo]
Optional.empty
---( false )---
Optional.empty
Optional.empty
Optional.empty
Optional.empty
Optional.empty
Optional.empty
---( str != &quot;&quot; )---
Optional[Foo]
Optional.empty
Optional[Bar]
Optional[Baz]
Optional[Bingo]
Optional.empty
---( str.length() == 3 )---
Optional[Foo]
Optional.empty
Optional[Bar]
Optional[Baz]
Optional.empty
Optional.empty
---( startsWith(&quot;B&quot;) )---
Optional.empty
Optional.empty
Optional[Bar]
Optional[Baz]
Optional[Bingo]
Optional.empty
</code></pre><p>&#x5373;&#x4F7F;&#x8F93;&#x51FA;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x6D41;&#xFF0C;&#x7279;&#x522B;&#x662F; <code>test()</code> &#x4E2D;&#x7684; for &#x5FAA;&#x73AF;&#x3002;&#x6BCF;&#x4E00;&#x6B21;&#x7684; for &#x5FAA;&#x73AF;&#x65F6;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x6D41;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E; for &#x5FAA;&#x73AF;&#x7684;&#x7D22;&#x5F15;&#x8DF3;&#x8FC7;&#x6307;&#x5B9A;&#x4E2A;&#x6570;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x5B83;&#x6700;&#x7EC8;&#x5728;&#x6D41;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8FDE;&#x7EED;&#x5143;&#x7D20;&#x4E0A;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x8C03;&#x7528; <code>findFirst()</code> &#x83B7;&#x53D6;&#x5269;&#x4F59;&#x5143;&#x7D20;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x7ED3;&#x679C;&#x4F1A;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF0C;&#x4E0D;&#x540C;&#x4E8E;&#x666E;&#x901A; for &#x5FAA;&#x73AF;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x7D22;&#x5F15;&#x503C;&#x8303;&#x56F4;&#x5E76;&#x4E0D;&#x662F; <code>i &lt; elements.length</code>&#xFF0C; &#x800C;&#x662F; <code>i &lt;= elements.length</code>&#x3002;&#x6240;&#x4EE5;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5B9E;&#x9645;&#x4E0A;&#x8D85;&#x51FA;&#x4E86;&#x6D41;&#x3002;&#x65B9;&#x4FBF;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x5C06;&#x81EA;&#x52A8;&#x6210;&#x4E3A; <strong>Optional.empty</strong>&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7684;&#x7ED3;&#x5C3E;&#x4E2D;&#x770B;&#x5230;&#x3002;</p>
<p>&#x540C; <code>map()</code> &#x4E00;&#x6837; &#xFF0C; <code>Optional.map()</code> &#x5E94;&#x7528;&#x4E8E;&#x51FD;&#x6570;&#x3002;&#x5B83;&#x4EC5;&#x5728; <strong>Optional</strong> &#x4E0D;&#x4E3A;&#x7A7A;&#x65F6;&#x624D;&#x5E94;&#x7528;&#x6620;&#x5C04;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x5C06; <strong>Optional</strong> &#x7684;&#x5185;&#x5BB9;&#x63D0;&#x53D6;&#x5230;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/OptionalMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span><span class="token class-name">Function</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span><span class="token class-name">Stream</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OptionalMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Produces an Optional</span>
                            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If Optional is not empty, map() first extracts</span>
        <span class="token comment">// the contents which it then passes</span>
        <span class="token comment">// to the function:</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Add brackets&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> s<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
                s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// After the function is finished, map() wraps the</span>
    <span class="token comment">// result in an Optional before returning it:</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>---( Add brackets )---
Optional[[12]]
Optional[[]]
Optional[[23]]
Optional[[45]]
Optional.empty
---( Increment )---
Optional[13]
Optional[]
Optional[24]
Optional[46]
Optional.empty
---( Replace )---
Optional[19]
Optional[]
Optional[93]
Optional[45]
Optional.empty
---( Take last digit )---
Optional[2]
Optional[]
Optional[3]
Optional[5]
Optional.empty
</code></pre><p>&#x6620;&#x5C04;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4F1A;&#x81EA;&#x52A8;&#x5305;&#x88C5;&#x6210;&#x4E3A; <strong>Optional</strong>&#x3002;<strong>Optional.empty</strong> &#x4F1A;&#x88AB;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x3002;</p>
<p><strong>Optional</strong> &#x7684; <code>flatMap()</code> &#x5E94;&#x7528;&#x4E8E;&#x5DF2;&#x751F;&#x6210; <strong>Optional</strong> &#x7684;&#x6620;&#x5C04;&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5; <code>flatMap()</code> &#x4E0D;&#x4F1A;&#x50CF; <code>map()</code> &#x90A3;&#x6837;&#x5C06;&#x7ED3;&#x679C;&#x5C01;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/OptionalFlatMap.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Optional</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span><span class="token class-name">Function</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span><span class="token class-name">Stream</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OptionalFlatMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span>
                     <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Add brackets&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
                        <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
                        s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span>
                        <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>---( Add brackets )---
Optional[[12]]
Optional[[]]
Optional[[23]]
Optional[[45]]
Optional.empty
 ---( Increment )---
Optional[13]
Optional[]
Optional[24]
Optional[46]
Optional.empty
 ---( Replace )---
Optional[19]
Optional[]
Optional[93]
Optional[45]
Optional.empty
 ---( Take last digit )---
Optional[2]
Optional[]
Optional[3]
Optional[5]
Optional.empty
</code></pre><p>&#x540C; <code>map()</code>&#xFF0C;<code>flatMap()</code> &#x5C06;&#x63D0;&#x53D6;&#x975E;&#x7A7A; <strong>Optional</strong> &#x7684;&#x5185;&#x5BB9;&#x5E76;&#x5C06;&#x5176;&#x5E94;&#x7528;&#x5728;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x3002;&#x552F;&#x4E00;&#x7684;&#x533A;&#x522B;&#x5C31;&#x662F; <code>flatMap()</code> &#x4E0D;&#x4F1A;&#x628A;&#x7ED3;&#x679C;&#x5305;&#x88C5;&#x5728; <strong>Optional</strong> &#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x5DF2;&#x7ECF;&#x88AB;&#x5305;&#x88C5;&#x8FC7;&#x4E86;&#x3002;&#x5728;&#x5982;&#x4E0A;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x6620;&#x5C04;&#x51FD;&#x6570;&#x4E2D;&#x663E;&#x5F0F;&#x5730;&#x5B8C;&#x6210;&#x4E86;&#x5305;&#x88C5;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x663E;&#x7136; <code>Optional.flatMap()</code> &#x662F;&#x4E3A;&#x90A3;&#x4E9B;&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x751F;&#x6210; <strong>Optional</strong> &#x7684;&#x51FD;&#x6570;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x3002;</p>
<h3 class="mume-header" id="optional-%E6%B5%81">Optional &#x6D41;</h3>

<p>&#x5047;&#x8BBE;&#x4F60;&#x7684;&#x751F;&#x6210;&#x5668;&#x53EF;&#x80FD;&#x4EA7;&#x751F; <code>null</code> &#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x7528;&#x5B83;&#x6765;&#x521B;&#x5EFA;&#x6D41;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x81EA;&#x7136;&#x5730;&#x60F3;&#x5230;&#x7528;  <strong>Optional</strong> &#x6765;&#x5305;&#x88C5;&#x5143;&#x7D20;&#x3002;&#x5982;&#x4E0B;&#x662F;&#x5B83;&#x7684;&#x6837;&#x5B50;&#xFF0C;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Signal.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Signal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> msg<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Signal(&quot;</span> <span class="token operator">+</span> msg <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Signal</span> <span class="token function">morse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token string">&quot;dot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token string">&quot;dash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">Signal</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Signal</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">morse</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>signal <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x6D41;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x5F04;&#x6E05;&#x695A;&#x5982;&#x4F55;&#x89E3;&#x5305; <strong>Optional</strong>&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/StreamOfOptionals.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfOptionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Signal</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Signal</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">isPresent</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">get</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">.</span>empty
<span class="token class-name">Optional</span><span class="token punctuation">.</span>empty
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">.</span>empty
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token class-name">Optional</span><span class="token punctuation">[</span><span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span>
<span class="token class-name">Signal</span><span class="token punctuation">(</span>dash<span class="token punctuation">)</span>
</pre><p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>filter()</code> &#x6765;&#x4FDD;&#x7559;&#x90A3;&#x4E9B;&#x975E;&#x7A7A; <strong>Optional</strong>&#xFF0C;&#x7136;&#x540E;&#x5728; <code>map()</code> &#x4E2D;&#x4F7F;&#x7528; <code>get()</code> &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x3002;&#x7531;&#x4E8E;&#x6BCF;&#x79CD;&#x60C5;&#x51B5;&#x90FD;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x201C;&#x7A7A;&#x503C;&#x201D;&#x7684;&#x542B;&#x4E49;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x8981;&#x4E3A;&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<h2 class="mume-header" id="%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C">&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;</h2>

<p>&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x83B7;&#x53D6;&#x6D41;&#x7684;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x3002;&#x81F3;&#x6B64;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x518D;&#x7EE7;&#x7EED;&#x5F80;&#x540E;&#x4F20;&#x9012;&#x6D41;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;&#xFF0C;&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;&#xFF08;Terminal Operations&#xFF09;&#x603B;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x6D41;&#x7BA1;&#x9053;&#x4E2D;&#x6240;&#x505A;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4EF6;&#x4E8B;&#x3002;</p>
<h3 class="mume-header" id="%E6%95%B0%E7%BB%84">&#x6570;&#x7EC4;</h3>

<ul>
<li><code>toArray()</code>&#xFF1A;&#x5C06;&#x6D41;&#x8F6C;&#x6362;&#x6210;&#x9002;&#x5F53;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x7EC4;&#x3002;</li>
<li><code>toArray(generator)</code>&#xFF1A;&#x5728;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x751F;&#x6210;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x7EC4;&#x3002;</li>
</ul>
<p>&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5F97;&#x5230;&#x6570;&#x7EC4;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x4EE5;&#x4FBF;&#x4E8E;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x5F88;&#x6709;&#x7528;&#x3002;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x590D;&#x7528;&#x6D41;&#x4EA7;&#x751F;&#x7684;&#x968F;&#x673A;&#x6570;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x4F7F;&#x7528;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;:</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/RandInts.java</span>
<span class="token keyword">package</span> streams<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandInts</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">IntStream</span> <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>rints<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x4E0A;&#x4F8B;&#x5C06;100&#x4E2A;&#x6570;&#x503C;&#x8303;&#x56F4;&#x5728; 0 &#x5230; 1000 &#x4E4B;&#x95F4;&#x7684;&#x968F;&#x673A;&#x6570;&#x6D41;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x6570;&#x7EC4;&#x5E76;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x5728; <code>rints</code> &#x4E2D;&#x3002;&#x8FD9;&#x6837;&#x4E00;&#x6765;&#xFF0C;&#x6BCF;&#x6B21;&#x8C03;&#x7528; <code>rands()</code> &#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#x83B7;&#x53D6;&#x76F8;&#x540C;&#x7684;&#x6574;&#x6570;&#x6D41;&#x3002;</p>
<h3 class="mume-header" id="%E5%BE%AA%E7%8E%AF">&#x5FAA;&#x73AF;</h3>

<ul>
<li><code>forEach(Consumer)</code>&#x5E38;&#x89C1;&#x5982; <code>System.out::println</code> &#x4F5C;&#x4E3A; <strong>Consumer</strong> &#x51FD;&#x6570;&#x3002;</li>
<li><code>forEachOrdered(Consumer)</code>&#xFF1A; &#x4FDD;&#x8BC1; <code>forEach</code> &#x6309;&#x7167;&#x539F;&#x59CB;&#x6D41;&#x987A;&#x5E8F;&#x64CD;&#x4F5C;&#x3002;</li>
</ul>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#xFF1A;&#x65E0;&#x5E8F;&#x64CD;&#x4F5C;&#xFF0C;&#x4EC5;&#x5728;&#x5F15;&#x5165;&#x5E76;&#x884C;&#x6D41;&#x65F6;&#x624D;&#x6709;&#x610F;&#x4E49;&#x3002;&#x5728; <a href="24-Concurrent-Programming.md">&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</a> &#x7AE0;&#x8282;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x6DF1;&#x5165;&#x7814;&#x7A76;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E0B; <code>parallel()</code>&#xFF1A;&#x53EF;&#x5B9E;&#x73B0;&#x591A;&#x5904;&#x7406;&#x5668;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x4E3A;&#x5C06;&#x6D41;&#x5206;&#x5272;&#x4E3A;&#x591A;&#x4E2A;&#xFF08;&#x901A;&#x5E38;&#x6570;&#x76EE;&#x4E3A; CPU &#x6838;&#x5FC3;&#x6570;&#xFF09;&#x5E76;&#x5728;&#x4E0D;&#x540C;&#x5904;&#x7406;&#x5668;&#x4E0A;&#x5206;&#x522B;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x7684;&#x662F;&#x5185;&#x90E8;&#x8FED;&#x4EE3;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5916;&#x90E8;&#x8FED;&#x4EE3;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x662F;&#x53EF;&#x80FD;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p>
<p><code>parallel()</code> &#x770B;&#x4F3C;&#x7B80;&#x5355;&#xFF0C;&#x5B9E;&#x5219;&#x68D8;&#x624B;&#x3002;&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x5C06;&#x5728;&#x7A0D;&#x540E;&#x7684; <a href="24-Concurrent-Programming.md">&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</a> &#x7AE0;&#x8282;&#x4E2D;&#x5B66;&#x4E60;&#x3002;</p>
<p>&#x4E0B;&#x4F8B;&#x5F15;&#x5165; <code>parallel()</code> &#x6765;&#x5E2E;&#x52A9;&#x7406;&#x89E3; <code>forEachOrdered(Consumer)</code> &#x7684;&#x4F5C;&#x7528;&#x548C;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/ForEach.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> streams<span class="token punctuation">.</span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForEach</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> SZ <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>SZ<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>SZ<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>SZ<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEachOrdered</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>258 555 693 861 961 429 868 200 522 207 288 128 551 589
551 861 429 589 200 522 555 693 258 128 868 288 961 207
258 555 693 861 961 429 868 200 522 207 288 128 551 589
</code></pre><p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6D4B;&#x8BD5;&#x4E0D;&#x540C;&#x5927;&#x5C0F;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x6211;&#x4EEC;&#x62BD;&#x79BB;&#x51FA;&#x4E86; <code>SZ</code> &#x53D8;&#x91CF;&#x3002;&#x7ED3;&#x679C;&#x5F88;&#x6709;&#x8DA3;&#xFF1A;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x6D41;&#x4E2D;&#xFF0C;&#x672A;&#x4F7F;&#x7528; <code>parallel()</code> &#xFF0C;&#x6240;&#x4EE5; <code>rands()</code> &#x6309;&#x7167;&#x5143;&#x7D20;&#x8FED;&#x4EE3;&#x51FA;&#x73B0;&#x7684;&#x987A;&#x5E8F;&#x663E;&#x793A;&#x7ED3;&#x679C;&#xFF1B;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x6D41;&#x4E2D;&#xFF0C;&#x5F15;&#x5165;<code>parallel()</code> &#xFF0C;&#x5373;&#x4FBF;&#x6D41;&#x5F88;&#x5C0F;&#xFF0C;&#x8F93;&#x51FA;&#x7684;&#x7ED3;&#x679C;&#x987A;&#x5E8F;&#x4E5F;&#x548C;&#x524D;&#x9762;&#x4E0D;&#x4E00;&#x6837;&#x3002;&#x8FD9;&#x662F;&#x7531;&#x4E8E;&#x591A;&#x5904;&#x7406;&#x5668;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#x7684;&#x539F;&#x56E0;&#x3002;&#x591A;&#x6B21;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#xFF0C;&#x7ED3;&#x679C;&#x5747;&#x4E0D;&#x540C;&#x3002;&#x591A;&#x5904;&#x7406;&#x5668;&#x5E76;&#x884C;&#x64CD;&#x4F5C;&#x5E26;&#x6765;&#x7684;&#x975E;&#x786E;&#x5B9A;&#x6027;&#x56E0;&#x7D20;&#x9020;&#x6210;&#x4E86;&#x8FD9;&#x6837;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x5728;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6D41;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E86; <code>parallel()</code> &#x548C; <code>forEachOrdered()</code> &#x6765;&#x5F3A;&#x5236;&#x4FDD;&#x6301;&#x539F;&#x59CB;&#x6D41;&#x987A;&#x5E8F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;&#x975E;&#x5E76;&#x884C;&#x6D41;&#x4F7F;&#x7528; <code>forEachOrdered()</code> &#x662F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F71;&#x54CD;&#x7684;&#x3002;</p>
<h3 class="mume-header" id="%E9%9B%86%E5%90%88">&#x96C6;&#x5408;</h3>

<ul>
<li><code>collect(Collector)</code>&#xFF1A;&#x4F7F;&#x7528; <strong>Collector</strong> &#x6536;&#x96C6;&#x6D41;&#x5143;&#x7D20;&#x5230;&#x7ED3;&#x679C;&#x96C6;&#x5408;&#x4E2D;&#x3002;</li>
<li><code>collect(Supplier, BiConsumer, BiConsumer)</code>&#xFF1A;&#x540C;&#x4E0A;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570; <strong>Supplier</strong> &#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7ED3;&#x679C;&#x96C6;&#x5408;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570; <strong>BiConsumer</strong> &#x5C06;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5305;&#x542B;&#x5230;&#x7ED3;&#x679C;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570; <strong>BiConsumer</strong> &#x7528;&#x4E8E;&#x5C06;&#x4E24;&#x4E2A;&#x503C;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x3002;</li>
</ul>
<p>&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E86;&#x51E0;&#x4E2A; <strong>Collectors</strong> &#x7684;&#x8FD0;&#x7528;&#x793A;&#x4F8B;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5B83;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x64CD;&#x4F5C;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x67E5;&#x770B; <code>java.util.stream.Collectors</code> &#x7684; API &#x6587;&#x6863;&#x4E86;&#x89E3;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5143;&#x7D20;&#x6536;&#x96C6;&#x5230;&#x4EFB;&#x610F;&#x4E00;&#x79CD;&#x7279;&#x5B9A;&#x7684;&#x96C6;&#x5408;&#x4E2D;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x5143;&#x7D20;&#x6709;&#x5E8F;&#xFF0C;&#x5C06;&#x5143;&#x7D20;&#x5B58;&#x50A8;&#x5728; <strong>TreeSet</strong> &#x4E2D;&#x3002;<strong>Collectors</strong> &#x91CC;&#x9762;&#x6CA1;&#x6709;&#x7279;&#x5B9A;&#x7684; <code>toTreeSet()</code>&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x96C6;&#x5408;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5F15;&#x7528;&#x4F20;&#x9012;&#x7ED9; <code>Collectors.toCollection()</code>&#xFF0C;&#x4ECE;&#x800C;&#x6784;&#x5EFA;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x96C6;&#x5408;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x5C06;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5355;&#x8BCD;&#x6536;&#x96C6;&#x5230; <strong>TreeSet</strong> &#x96C6;&#x5408;&#x4E2D;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/TreeSetOfWords.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeSetOfWords</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words2 <span class="token operator">=</span>
                <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;TreeSetOfWords.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;\\d+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// No numbers</span>
                        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">trim</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">TreeSet</span><span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>words2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>[Arrays, Collectors, Exception, Files, Output, Paths,
Set, String, System, TreeSet, TreeSetOfWords, args,
class, collect, file, filter, flatMap, get, import,
java, length, limit, lines, main, map, matches, new,
nio, numbers, out, println, public, split, static,
stream, streams, throws, toCollection, trim, util,
void, words2]
</code></pre><p><strong>Files.</strong><code>lines()</code> &#x6253;&#x5F00; <strong>Path</strong> &#x5E76;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x6210;&#x4E3A;&#x884C;&#x6D41;&#x3002;&#x4E0B;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x5C06;&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x975E;&#x5355;&#x8BCD;&#x5B57;&#x7B26;&#xFF08;<code>\\w+</code>&#xFF09;&#x884C;&#x8FDB;&#x884C;&#x5206;&#x5272;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528; <strong>Arrays.</strong><code>stream()</code> &#x5C06;&#x5176;&#x8F6C;&#x5316;&#x6210;&#x4E3A;&#x6D41;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x5C55;&#x5E73;&#x6620;&#x5C04;&#x6210;&#x4E3A;&#x5355;&#x8BCD;&#x6D41;&#x3002;&#x4F7F;&#x7528; <code>matches(\\d+)</code> &#x67E5;&#x627E;&#x5E76;&#x79FB;&#x9664;&#x5168;&#x6570;&#x5B57;&#x5B57;&#x7B26;&#x4E32;&#xFF08;<strong>&#x6CE8;&#x610F;</strong>,<code>words2</code> &#x662F;&#x901A;&#x8FC7;&#x7684;&#xFF09;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <strong>String.</strong><code>trim()</code> &#x53BB;&#x9664;&#x5355;&#x8BCD;&#x4E24;&#x8FB9;&#x7684;&#x7A7A;&#x767D;&#xFF0C;<code>filter()</code> &#x8FC7;&#x6EE4;&#x6240;&#x6709;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;3&#x7684;&#x5355;&#x8BCD;&#xFF0C;&#x7D27;&#x63A5;&#x7740;&#x53EA;&#x83B7;&#x53D6;100&#x4E2A;&#x5355;&#x8BCD;&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x5176;&#x4FDD;&#x5B58;&#x5230; <strong>TreeSet</strong> &#x4E2D;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x6D41;&#x4E2D;&#x751F;&#x6210; <strong>Map</strong>&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/MapCollector.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Pair</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Character</span> c<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> i<span class="token punctuation">;</span>
    <span class="token class-name">Pair</span><span class="token punctuation">(</span><span class="token class-name">Character</span> c<span class="token punctuation">,</span> <span class="token class-name">Integer</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>c <span class="token operator">=</span> c<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Character</span> <span class="token function">getC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Pair(&quot;</span> <span class="token operator">+</span> c <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">RandomPair</span> <span class="token punctuation">{</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// An infinite iterator of random capital letters:</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> capChars <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pair</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token punctuation">(</span>capChars<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapCollector</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">RandomPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>
                                <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">getI</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">getC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>{688=W, 309=C, 293=B, 761=N, 858=N, 668=G, 622=F, 751=N}
</code></pre><p><strong>Pair</strong> &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x3002;<strong>RandomPair</strong> &#x521B;&#x5EFA;&#x4E86;&#x968F;&#x673A;&#x751F;&#x6210;&#x7684; <strong>Pair</strong> &#x5BF9;&#x8C61;&#x6D41;&#x3002;&#x5728; Java &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x7EC4;&#x5408;&#x4E24;&#x4E2A;&#x6D41;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6D41;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528; <code>mapToObj()</code> &#x5C06;&#x5176;&#x8F6C;&#x5316;&#x6210;&#x4E3A; <strong>Pair</strong> &#x6D41;&#x3002; <strong>capChars</strong> &#x968F;&#x673A;&#x751F;&#x6210;&#x7684;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x8FED;&#x4EE3;&#x5668;&#x4ECE;&#x6D41;&#x5F00;&#x59CB;&#xFF0C;&#x7136;&#x540E; <code>iterator()</code> &#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5728; <code>stream()</code> &#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x3002;&#x5C31;&#x6211;&#x6240;&#x77E5;&#xFF0C;&#x8FD9;&#x662F;&#x7EC4;&#x5408;&#x591A;&#x4E2A;&#x6D41;&#x4EE5;&#x751F;&#x6210;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#x6D41;&#x7684;&#x552F;&#x4E00;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x4F7F;&#x7528;&#x6700;&#x7B80;&#x5355;&#x5F62;&#x5F0F;&#x7684; <code>Collectors.toMap()</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x503C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x4ECE;&#x6D41;&#x4E2D;&#x83B7;&#x53D6;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x51FD;&#x6570;&#x3002;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x91CD;&#x8F7D;&#x5F62;&#x5F0F;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x662F;&#x5728;&#x9047;&#x5230;&#x952E;&#x503C;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6765;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code>java.util.stream.Collectors</code> &#x4E2D;&#x9884;&#x8BBE;&#x7684; <strong>Collector</strong> &#x5C31;&#x80FD;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x7684;&#x8981;&#x6C42;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7B2C;&#x4E8C;&#x79CD;&#x5F62;&#x5F0F;&#x7684; <code>collect()</code>&#x3002; &#x6211;&#x628A;&#x5B83;&#x7559;&#x4F5C;&#x66F4;&#x9AD8;&#x7EA7;&#x7684;&#x7EC3;&#x4E60;&#xFF0C;&#x4E0B;&#x4F8B;&#x7ED9;&#x51FA;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/SpecialCollector.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpecialCollector</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token operator">:</span><span class="token operator">:</span><span class="token keyword">new</span><span class="token punctuation">,</span>
                                <span class="token class-name">ArrayList</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">add</span><span class="token punctuation">,</span>
                                <span class="token class-name">ArrayList</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">addAll</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        words<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;cheese&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>cheese
cheese
</code></pre><p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C; <strong>ArrayList</strong> &#x7684;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;&#x4F60;&#x6240;&#x9700;&#x8981;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x4F3C;&#x4E4E;&#x66F4;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7684; <code>collect()</code>&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7279;&#x6B8A;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>
<h3 class="mume-header" id="%E7%BB%84%E5%90%88">&#x7EC4;&#x5408;</h3>

<ul>
<li><code>reduce(BinaryOperator)</code>&#xFF1A;&#x4F7F;&#x7528; <strong>BinaryOperator</strong> &#x6765;&#x7EC4;&#x5408;&#x6240;&#x6709;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;&#x56E0;&#x4E3A;&#x6D41;&#x53EF;&#x80FD;&#x4E3A;&#x7A7A;&#xFF0C;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#x4E3A; <strong>Optional</strong>&#x3002;</li>
<li><code>reduce(identity, BinaryOperator)</code>&#xFF1A;&#x529F;&#x80FD;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528; <strong>identity</strong> &#x4F5C;&#x4E3A;&#x5176;&#x7EC4;&#x5408;&#x7684;&#x521D;&#x59CB;&#x503C;&#x3002;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#xFF0C;<strong>identity</strong> &#x5C31;&#x662F;&#x7ED3;&#x679C;&#x3002;</li>
<li><code>reduce(identity, BiFunction, BinaryOperator)</code>&#xFF1A;&#x66F4;&#x590D;&#x6742;&#x7684;&#x4F7F;&#x7528;&#x5F62;&#x5F0F;&#xFF08;&#x6682;&#x4E0D;&#x4ECB;&#x7ECD;&#xFF09;&#xFF0C;&#x8FD9;&#x91CC;&#x628A;&#x5B83;&#x5305;&#x542B;&#x5728;&#x5185;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x663E;&#x5F0F;&#x5730;&#x7EC4;&#x5408; <code>map()</code> &#x548C; <code>reduce()</code> &#x6765;&#x66F4;&#x7B80;&#x5355;&#x7684;&#x8868;&#x8FBE;&#x5B83;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x6765;&#x770B;&#x4E0B; <code>reduce</code> &#x7684;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Reduce.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Frobnitz</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token class-name">Frobnitz</span><span class="token punctuation">(</span><span class="token keyword">int</span> sz<span class="token punctuation">)</span> <span class="token punctuation">{</span> size <span class="token operator">=</span> sz<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Frobnitz(&quot;</span> <span class="token operator">+</span> size <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Generator:</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> BOUND <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Frobnitz</span> <span class="token function">supply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Frobnitz</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>BOUND<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Reduce</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Frobnitz</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">supply</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fr0<span class="token punctuation">,</span> fr1<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> fr0<span class="token punctuation">.</span>size <span class="token operator">&lt;</span> <span class="token number">50</span> <span class="token operator">?</span> fr0 <span class="token operator">:</span> fr1<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>Frobnitz(58)
Frobnitz(55)
Frobnitz(93)
Frobnitz(61)
Frobnitz(61)
Frobnitz(29)
Frobnitz(68)
Frobnitz(0)
Frobnitz(22)
Frobnitz(7)
Frobnitz(29)
</code></pre><p><strong>Frobnitz</strong> &#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; <code>supply()</code> &#x7684;&#x751F;&#x6210;&#x5668;&#xFF1B;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5BF9;&#x4E8E; <code>Supplier&lt;Frobnitz&gt;</code> &#x662F;&#x7B7E;&#x540D;&#x517C;&#x5BB9;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x4F20;&#x9012;&#x7ED9; <code>Stream.generate()</code>&#xFF08;&#x8FD9;&#x79CD;&#x7B7E;&#x540D;&#x517C;&#x5BB9;&#x6027;&#x88AB;&#x79F0;&#x4F5C;&#x7ED3;&#x6784;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#x3002;&#x65E0;&#x201C;&#x521D;&#x59CB;&#x503C;&#x201D;&#x7684; <code>reduce()</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x503C;&#x662F; <strong>Optional</strong> &#x7C7B;&#x578B;&#x3002;<code>Optional.ifPresent()</code> &#x53EA;&#x6709;&#x5728;&#x7ED3;&#x679C;&#x975E;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x8C03;&#x7528; <code>Consumer&lt;Frobnitz&gt;</code> &#xFF08;<code>println</code> &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x88AB;&#x8C03;&#x7528;&#x662F;&#x56E0;&#x4E3A; <strong>Frobnitz</strong> &#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>toString()</code> &#x65B9;&#x6CD5;&#x8F6C;&#x6362;&#x6210; <strong>String</strong>&#xFF09;&#x3002;</p>
<p>Lambda &#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570; <code>fr0</code> &#x662F;&#x4E0A;&#x4E00;&#x6B21;&#x8C03;&#x7528; <code>reduce()</code> &#x7684;&#x7ED3;&#x679C;&#x3002;&#x800C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570; <code>fr1</code> &#x662F;&#x4ECE;&#x6D41;&#x4F20;&#x9012;&#x8FC7;&#x6765;&#x7684;&#x503C;&#x3002;</p>
<p><code>reduce()</code> &#x4E2D;&#x7684; Lambda &#x8868;&#x8FBE;&#x5F0F;&#x4F7F;&#x7528;&#x4E86;&#x4E09;&#x5143;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x83B7;&#x53D6;&#x7ED3;&#x679C;&#xFF0C;&#x5F53;&#x5176;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E; 50 &#x7684;&#x65F6;&#x5019;&#x83B7;&#x53D6; <code>fr0</code> &#x5426;&#x5219;&#x83B7;&#x53D6;&#x5E8F;&#x5217;&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x503C; <code>fr1</code>&#x3002;&#x5F53;&#x53D6;&#x5F97;&#x7B2C;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E; 50 &#x7684; <code>Frobnitz</code>&#xFF0C;&#x53EA;&#x8981;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x5C31;&#x4F1A;&#x5FFD;&#x7565;&#x5176;&#x4ED6;&#x3002;&#x8FD9;&#x662F;&#x4E2A;&#x975E;&#x5E38;&#x5947;&#x602A;&#x7684;&#x7EA6;&#x675F;&#xFF0C; &#x4E5F;&#x786E;&#x5B9E;&#x8BA9;&#x6211;&#x4EEC;&#x5BF9; <code>reduce()</code> &#x6709;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x4E86;&#x89E3;&#x3002;</p>
<h3 class="mume-header" id="%E5%8C%B9%E9%85%8D">&#x5339;&#x914D;</h3>

<ul>
<li><code>allMatch(Predicate)</code> &#xFF1A;&#x5982;&#x679C;&#x6D41;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684; <strong>Predicate</strong> &#x90FD;&#x8FD4;&#x56DE; true &#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x4E3A; true&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A; false &#x65F6;&#xFF0C;&#x5219;&#x505C;&#x6B62;&#x6267;&#x884C;&#x8BA1;&#x7B97;&#x3002;</li>
<li><code>anyMatch(Predicate)</code>&#xFF1A;&#x5982;&#x679C;&#x6D41;&#x4E2D;&#x7684;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684; <strong>Predicate</strong> &#x8FD4;&#x56DE; true &#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x4E3A; true&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A; true &#x65F6;&#xFF0C;&#x5219;&#x505C;&#x6B62;&#x6267;&#x884C;&#x8BA1;&#x7B97;&#x3002;</li>
<li><code>noneMatch(Predicate)</code>&#xFF1A;&#x5982;&#x679C;&#x6D41;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6839;&#x636E;&#x63D0;&#x4F9B;&#x7684; <strong>Predicate</strong> &#x90FD;&#x8FD4;&#x56DE; false &#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x4E3A; true&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A; true &#x65F6;&#xFF0C;&#x505C;&#x6B62;&#x6267;&#x884C;&#x8BA1;&#x7B97;&#x3002;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5728; <code>Prime.java</code> &#x4E2D;&#x770B;&#x5230;&#x4E86; <code>noneMatch()</code> &#x7684;&#x793A;&#x4F8B;&#xFF1B;<code>allMatch()</code> &#x548C; <code>anyMatch()</code> &#x7684;&#x7528;&#x6CD5;&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x7B49;&#x540C;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x63A2;&#x7A76;&#x4E00;&#x4E0B;&#x77ED;&#x8DEF;&#x884C;&#x4E3A;&#x3002;&#x4E3A;&#x4E86;&#x6D88;&#x9664;&#x5197;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86; <code>show()</code>&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x7EDF;&#x4E00;&#x5730;&#x63CF;&#x8FF0;&#x8FD9;&#x4E09;&#x4E2A;&#x5339;&#x914D;&#x5668;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x4E3A; <strong>Matcher</strong> &#x63A5;&#x53E3;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Matching.java</span>
<span class="token comment">// Demonstrates short-circuiting of *Match() operations</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> streams<span class="token punctuation">.</span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Matcher</span> <span class="token keyword">extends</span> <span class="token class-name">BiPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Stream</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Matching</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Matcher</span> match<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                match<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>
                        <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        n <span class="token operator">-&gt;</span> n <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">allMatch</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">allMatch</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">anyMatch</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">anyMatch</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">noneMatch</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">noneMatch</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>1 2 3 4 5 6 7 8 9 true
1 2 3 4 false
1 true
1 2 3 4 5 6 7 8 9 false
1 false
1 2 3 4 5 6 7 8 9 true
</code></pre><p><strong>BiPredicate</strong> &#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x5143;&#x8C13;&#x8BCD;&#xFF0C;&#x5B83;&#x53EA;&#x80FD;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x4E14;&#x53EA;&#x8FD4;&#x56DE; true &#x6216;&#x8005; false&#x3002;&#x5B83;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x6D4B;&#x8BD5;&#x7684;&#x6D41;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x8C13;&#x8BCD; <strong>Predicate</strong>&#x3002;<strong>Matcher</strong> &#x9002;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x7684; <strong>Stream::*Match</strong> &#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x6BCF;&#x4E00;&#x4E2A;&#x5230; <code>show()</code> &#x4E2D;&#x3002;<code>match.test()</code> &#x7684;&#x8C03;&#x7528;&#x4F1A;&#x88AB;&#x8F6C;&#x6362;&#x6210; <strong>Stream::*Match</strong> &#x51FD;&#x6570;&#x7684;&#x8C03;&#x7528;&#x3002;</p>
<p><code>show()</code> &#x83B7;&#x53D6;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;<strong>Matcher</strong> &#x5339;&#x914D;&#x5668;&#x548C;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x8C13;&#x8BCD;&#x6D4B;&#x8BD5; <strong>n &lt; val</strong> &#x4E2D;&#x6700;&#x5927;&#x503C;&#x7684; <strong>val</strong>&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x751F;&#x6210;&#x4E00;&#x4E2A;1-9&#x4E4B;&#x95F4;&#x7684;&#x6574;&#x6570;&#x6D41;&#x3002;<code>peek()</code> &#x662F;&#x7528;&#x4E8E;&#x5411;&#x6211;&#x4EEC;&#x5C55;&#x793A;&#x6D4B;&#x8BD5;&#x5728;&#x77ED;&#x8DEF;&#x4E4B;&#x524D;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4ECE;&#x8F93;&#x51FA;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6BCF;&#x6B21;&#x90FD;&#x53D1;&#x751F;&#x4E86;&#x77ED;&#x8DEF;&#x3002;</p>
<h3 class="mume-header" id="%E6%9F%A5%E6%89%BE">&#x67E5;&#x627E;</h3>

<ul>
<li><code>findFirst()</code>&#xFF1A;&#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x6D41;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong>&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x8FD4;&#x56DE; <strong>Optional.empty</strong>&#x3002;</li>
<li><code>findAny(</code>&#xFF1A;&#x8FD4;&#x56DE;&#x542B;&#x6709;&#x4EFB;&#x610F;&#x6D41;&#x5143;&#x7D20;&#x7684; <strong>Optional</strong>&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x4E3A;&#x7A7A;&#x8FD4;&#x56DE; <strong>Optional.empty</strong>&#x3002;</li>
</ul>
<p>&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/SelectElement.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> streams<span class="token punctuation">.</span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>258
258
258
242
</code></pre><p><code>findFirst()</code> &#x65E0;&#x8BBA;&#x6D41;&#x662F;&#x5426;&#x4E3A;&#x5E76;&#x884C;&#x5316;&#x7684;&#xFF0C;&#x603B;&#x662F;&#x4F1A;&#x9009;&#x62E9;&#x6D41;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x5BF9;&#x4E8E;&#x975E;&#x5E76;&#x884C;&#x6D41;&#xFF0C;<code>findAny()</code>&#x4F1A;&#x9009;&#x62E9;&#x6D41;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF08;&#x5373;&#x4F7F;&#x4ECE;&#x5B9A;&#x4E49;&#x4E0A;&#x6765;&#x770B;&#x662F;&#x9009;&#x62E9;&#x4EFB;&#x610F;&#x5143;&#x7D20;&#xFF09;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>parallel()</code> &#x6765;&#x5E76;&#x884C;&#x6D41;&#x4ECE;&#x800C;&#x5F15;&#x5165; <code>findAny()</code> &#x9009;&#x62E9;&#x975E;&#x7B2C;&#x4E00;&#x4E2A;&#x6D41;&#x5143;&#x7D20;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5FC5;&#x987B;&#x9009;&#x62E9;&#x6D41;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x90A3;&#x5C31;&#x4F7F;&#x7528; <code>reduce()</code>&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/LastElement.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LastElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OptionalInt</span> last <span class="token operator">=</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>last<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Non-numeric object:</span>
        <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lastobj <span class="token operator">=</span>
                <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                lastobj<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing there!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>19
three
</code></pre><p><code>reduce()</code>  &#x7684;&#x53C2;&#x6570;&#x53EA;&#x662F;&#x7528;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x66FF;&#x6362;&#x4E86;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x6700;&#x7EC8;&#x53EA;&#x751F;&#x6210;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x5982;&#x679C;&#x4E3A;&#x6570;&#x5B57;&#x6D41;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x76F8;&#x8FD1;&#x7684;&#x6570;&#x5B57; <strong>Optional</strong> &#x7C7B;&#x578B;&#xFF08; numeric optional type&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; <strong>Optional</strong> &#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x50CF;&#x4E0A;&#x4F8B;&#x4E2D;&#x7684; <code>Optional&lt;String&gt;</code>&#x3002;</p>
<h3 class="mume-header" id="%E4%BF%A1%E6%81%AF">&#x4FE1;&#x606F;</h3>

<ul>
<li><code>count()</code>&#xFF1A;&#x6D41;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002;</li>
<li><code>max(Comparator)</code>&#xFF1A;&#x6839;&#x636E;&#x6240;&#x4F20;&#x5165;&#x7684; <strong>Comparator</strong> &#x6240;&#x51B3;&#x5B9A;&#x7684;&#x201C;&#x6700;&#x5927;&#x201D;&#x5143;&#x7D20;&#x3002;</li>
<li><code>min(Comparator)</code>&#xFF1A;&#x6839;&#x636E;&#x6240;&#x4F20;&#x5165;&#x7684; <strong>Comparator</strong> &#x6240;&#x51B3;&#x5B9A;&#x7684;&#x201C;&#x6700;&#x5C0F;&#x201D;&#x5143;&#x7D20;&#x3002;</li>
</ul>
<p><strong>String</strong> &#x7C7B;&#x578B;&#x6709;&#x9884;&#x8BBE;&#x7684; <strong>Comparator</strong> &#x5B9E;&#x73B0;&#x3002;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/Informational.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Informational</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;NONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;NONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>32
a
you
</code></pre><p><code>min()</code> &#x548C; <code>max()</code> &#x7684;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E3A; <strong>Optional</strong>&#xFF0C;&#x8FD9;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x4F7F;&#x7528; <code>orElse()</code>&#x6765;&#x89E3;&#x5305;&#x3002;</p>
<h3 class="mume-header" id="%E6%95%B0%E5%AD%97%E6%B5%81%E4%BF%A1%E6%81%AF">&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;</h3>

<ul>
<li><code>average()</code> &#xFF1A;&#x6C42;&#x53D6;&#x6D41;&#x5143;&#x7D20;&#x5E73;&#x5747;&#x503C;&#x3002;</li>
<li><code>max()</code> &#x548C; <code>min()</code>&#xFF1A;&#x6570;&#x503C;&#x6D41;&#x64CD;&#x4F5C;&#x65E0;&#x9700; <strong>Comparator</strong>&#x3002;</li>
<li><code>sum()</code>&#xFF1A;&#x5BF9;&#x6240;&#x6709;&#x6D41;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6C42;&#x548C;&#x3002;</li>
<li><code>summaryStatistics()</code>&#xFF1A;&#x751F;&#x6210;&#x53EF;&#x80FD;&#x6709;&#x7528;&#x7684;&#x6570;&#x636E;&#x3002;&#x76EE;&#x524D;&#x5E76;&#x4E0D;&#x592A;&#x6E05;&#x695A;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5B58;&#x5728;&#x7684;&#x5FC5;&#x8981;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x7528;&#x66F4;&#x76F4;&#x63A5;&#x7684;&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x3002;</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token comment">// streams/NumericStreamInfo.java</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> streams<span class="token punctuation">.</span><span class="token class-name">RandInts</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NumericStreamInfo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summaryStatistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre data-role="codeBlock" data-info class="language-"><code>507.94
998
8
50794
IntSummaryStatistics{count=100, sum=50794, min=8, average=507.940000, max=998}
</code></pre><p>&#x4E0A;&#x4F8B;&#x64CD;&#x4F5C;&#x5BF9;&#x4E8E; <strong>LongStream</strong> &#x548C; <strong>DoubleStream</strong> &#x540C;&#x6837;&#x9002;&#x7528;&#x3002;</p>
<h2 class="mume-header" id="%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93">&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;</h2>

<p>&#x6D41;&#x5F0F;&#x64CD;&#x4F5C;&#x6539;&#x53D8;&#x5E76;&#x6781;&#x5927;&#x5730;&#x63D0;&#x5347;&#x4E86; Java &#x8BED;&#x8A00;&#x7684;&#x53EF;&#x7F16;&#x7A0B;&#x6027;&#xFF0C;&#x5E76;&#x53EF;&#x80FD;&#x6781;&#x5927;&#x5730;&#x963B;&#x6B62;&#x4E86; Java &#x7F16;&#x7A0B;&#x4EBA;&#x5458;&#x5411;&#x8BF8;&#x5982; Scala &#x8FD9;&#x79CD;&#x51FD;&#x6570;&#x5F0F;&#x8BED;&#x8A00;&#x7684;&#x6D41;&#x8F6C;&#x3002;&#x5728;&#x672C;&#x4E66;&#x7684;&#x5269;&#x4F59;&#x90E8;&#x5206;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x4F7F;&#x7528;&#x6D41;&#x3002;</p>
<div style="page-break-after: always;"></div>

      </div>
      <div class="md-sidebar-toc"><ul>
<li><a href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-%E6%B5%81%E5%BC%8F%E7%BC%96%E7%A8%8B">&#x7B2C;&#x5341;&#x56DB;&#x7AE0; &#x6D41;&#x5F0F;&#x7F16;&#x7A0B;</a>
<ul>
<li><a href="#%E6%B5%81%E6%94%AF%E6%8C%81">&#x6D41;&#x652F;&#x6301;</a></li>
<li><a href="#%E6%B5%81%E5%88%9B%E5%BB%BA">&#x6D41;&#x521B;&#x5EFA;</a>
<ul>
<li><a href="#%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%B5%81">&#x968F;&#x673A;&#x6570;&#x6D41;</a></li>
<li><a href="#int-%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%8C%83%E5%9B%B4">int &#x7C7B;&#x578B;&#x7684;&#x8303;&#x56F4;</a></li>
<li><a href="#generate">generate()</a></li>
<li><a href="#iterate">iterate()</a></li>
<li><a href="#%E6%B5%81%E7%9A%84%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F">&#x6D41;&#x7684;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</a></li>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</a></li>
</ul>
</li>
<li><a href="#%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C">&#x4E2D;&#x95F4;&#x64CD;&#x4F5C;</a>
<ul>
<li><a href="#%E8%B7%9F%E8%B8%AA%E5%92%8C%E8%B0%83%E8%AF%95">&#x8DDF;&#x8E2A;&#x548C;&#x8C03;&#x8BD5;</a></li>
<li><a href="#%E6%B5%81%E5%85%83%E7%B4%A0%E6%8E%92%E5%BA%8F">&#x6D41;&#x5143;&#x7D20;&#x6392;&#x5E8F;</a></li>
<li><a href="#%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0">&#x79FB;&#x9664;&#x5143;&#x7D20;</a></li>
<li><a href="#%E5%BA%94%E7%94%A8%E5%87%BD%E6%95%B0%E5%88%B0%E5%85%83%E7%B4%A0">&#x5E94;&#x7528;&#x51FD;&#x6570;&#x5230;&#x5143;&#x7D20;</a></li>
<li><a href="#%E5%9C%A8-map-%E4%B8%AD%E7%BB%84%E5%90%88%E6%B5%81">&#x5728; <code>map()</code> &#x4E2D;&#x7EC4;&#x5408;&#x6D41;</a></li>
</ul>
</li>
<li><a href="#optional%E7%B1%BB">Optional&#x7C7B;</a>
<ul>
<li><a href="#%E4%BE%BF%E5%88%A9%E5%87%BD%E6%95%B0">&#x4FBF;&#x5229;&#x51FD;&#x6570;</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-optional">&#x521B;&#x5EFA; Optional</a></li>
<li><a href="#optional-%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C">Optional &#x5BF9;&#x8C61;&#x64CD;&#x4F5C;</a></li>
<li><a href="#optional-%E6%B5%81">Optional &#x6D41;</a></li>
</ul>
</li>
<li><a href="#%E7%BB%88%E7%AB%AF%E6%93%8D%E4%BD%9C">&#x7EC8;&#x7AEF;&#x64CD;&#x4F5C;</a>
<ul>
<li><a href="#%E6%95%B0%E7%BB%84">&#x6570;&#x7EC4;</a></li>
<li><a href="#%E5%BE%AA%E7%8E%AF">&#x5FAA;&#x73AF;</a></li>
<li><a href="#%E9%9B%86%E5%90%88">&#x96C6;&#x5408;</a></li>
<li><a href="#%E7%BB%84%E5%90%88">&#x7EC4;&#x5408;</a></li>
<li><a href="#%E5%8C%B9%E9%85%8D">&#x5339;&#x914D;</a></li>
<li><a href="#%E6%9F%A5%E6%89%BE">&#x67E5;&#x627E;</a></li>
<li><a href="#%E4%BF%A1%E6%81%AF">&#x4FE1;&#x606F;</a></li>
<li><a href="#%E6%95%B0%E5%AD%97%E6%B5%81%E4%BF%A1%E6%81%AF">&#x6570;&#x5B57;&#x6D41;&#x4FE1;&#x606F;</a></li>
</ul>
</li>
<li><a href="#%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93">&#x672C;&#x7AE0;&#x5C0F;&#x7ED3;</a></li>
</ul>
</li>
</ul>
</div>
      <a id="sidebar-toc-btn">&#x2261;</a>
    
    
    
    
    
    
    
    
<script>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  
    </body></html>